<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="https://bazlur.ca/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/"><title>SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization | Bazlur’s Blog Archive</title><meta name="generator" content="Jekyll v3.9.5" /><meta property="og:title" content="SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization" /><meta name="author" content="A N M Bazlur Rahman" /><meta property="og:locale" content="en_US" /><meta name="description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><meta property="og:description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><link rel="canonical" href="http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/" /><meta property="og:url" content="http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/" /><meta property="og:site_name" content="Bazlur’s Blog Archive" /><meta property="og:image" content="http://localhost:4001/assets/img/default-og.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-02-14T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="http://localhost:4001/assets/img/default-og.jpg" /><meta property="twitter:title" content="SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization" /><meta name="twitter:site" content="@bazlur_rahman" /><meta name="twitter:creator" content="@A N M Bazlur Rahman" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"A N M Bazlur Rahman"},"dateModified":"2025-02-14T00:00:00-05:00","datePublished":"2025-02-14T00:00:00-05:00","description":"A comprehensive archive of articles on Java, Software Development, and Technology","headline":"SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization","image":"http://localhost:4001/assets/img/default-og.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/"},"url":"http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/"}</script><style> /* Critical CSS - Inline for faster initial render */ :root { --primary-color: #2563eb; --secondary-color: #7c3aed; --text-color: #1f2937; --text-light: #6b7280; --bg-color: #ffffff; --bg-gray: #f9fafb; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; line-height: 1.6; color: var(--text-color); background: var(--bg-gray); } .wrapper { max-width: 1200px; margin: 0 auto; padding: 0 2rem; } header { background: var(--bg-color); box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; } .site-nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; } .site-title { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; } .nav-links { display: flex; gap: 2rem; list-style: none; } .nav-links a { color: var(--text-color); text-decoration: none; transition: color 0.2s; } .nav-links a:hover { color: var(--primary-color); } /* Above-the-fold home page styles */ .banner-container { margin: 2rem auto 3rem; text-align: center; } .ascii-banner { display: inline-block; font-family: 'JetBrains Mono', monospace; font-size: 11px; line-height: 1.2; color: var(--primary-color); } @media (max-width: 768px) { .wrapper { padding: 0 1rem; } .ascii-banner { font-size: 6px; } .nav-links { gap: 1rem; } }</style><link rel="preload" href="/assets/css/main.css?v=2" as="style" onload="this.onload=null;this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="/assets/css/main.css?v=2"></noscript><link rel="alternate" type="application/rss+xml" title="Bazlur&#39;s Blog Archive" href="/feed.xml"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><body><header class="site-header"><div class="header-wrapper"> <a class="site-title" href="/">Bazlur&#39;s Blog Archive</a> <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false"> <span class="hamburger"> <span></span> <span></span> <span></span> </span> </button><nav class="site-nav"> <a class="nav-link" href="/">Home</a> <a class="nav-link" href="/archive">Archive</a> <a class="nav-link" href="/tags">Tags</a> <a class="nav-link" href="/search">Search</a> <a class="nav-link" href="https://bazlur.com/conference/" target="_blank" rel="noopener">Speaking</a> <a class="nav-link" href="/about">About</a> <a class="nav-link nav-link-external" href="https://bazlur.ca" target="_blank" rel="noopener">Original Site →</a></nav></div></header><main class="page-content" aria-label="Content"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><div class="post-hero-image"> <img src="/images/gemini-generated-image-6ad3g46ad3g46ad3.jpeg" alt="SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization" itemprop="image"><div class="hero-overlay"></div></div><div class="post-header with-hero"><div class="wrapper"><h1 class="post-title p-name" itemprop="name headline">SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization</h1><p class="post-meta"> <time class="dt-published" datetime="2025-02-13T19:00:00-05:00" itemprop="datePublished"> February 14, 2025 </time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span class="p-author h-card" itemprop="name">A N M Bazlur Rahman</span> </span></p><div class="post-tags-header"> <a href="/tags/java%20programming/" class="post-tag-badge">java programming</a> <a href="/tags/java%2011/" class="post-tag-badge">java 11</a> <a href="/tags/java%2021/" class="post-tag-badge">java 21</a> <a href="/tags/java%20cli/" class="post-tag-badge">java cli</a> <a href="/tags/java%20code/" class="post-tag-badge">java code</a></div></div></div><div class="wrapper post-wrapper-with-toc"><div class="post-container"><div class="post-content e-content" itemprop="articleBody"><p><img src="/images/gemini-generated-image-6ad3g46ad3g46ad3.jpeg" alt="" /></p><h1 id="summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization">SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization</h1><p>LLM chat models have become an integral part of many applications today. We are all experimenting and exploring the best ways to utilize them effectively. For Java developers, <strong>LangChain4j</strong> has been an incredible tool in this journey.</p><p>By design, most available APIs, such as ChatGPT and Gemini, operate in a <strong>fire-and-forget</strong> mode. They don’t retain previous interactions, meaning every request is treated as a completely new one. However, for a smooth and engaging conversation, maintaining context is crucial—otherwise, the interaction becomes disjointed and frustrating. The common solution is to pass previous messages along with each new prompt, allowing the LLM to infer context. This is where the <strong>chat memory</strong> concept comes in.</p><p>That said, every conversation has a <strong>context window</strong> , which limits the maximum number of tokens that can be processed. We can’t pass an unlimited number of tokens in a prompt. As conversations grow longer, they consume more resources, making it necessary to find efficient ways to manage and evict older messages.</p><p><strong>LangChain4j</strong> already provides two types of memory eviction policies:</p><ol><li><strong>MessageWindowChatMemory</strong> – This approach keeps track of a fixed number of recent messages, discarding the oldest ones when the limit is reached.<li><strong>TokenWindowChatMemory</strong> – Instead of counting messages, this method monitors the total number of tokens used and removes older messages when the token count exceeds a predefined threshold.</ol><p>These memory policies help optimize resource usage while ensuring conversations remain coherent and user-friendly.</p><p>While both approaches are effective, I wondered why not add a <strong>third approach</strong> —one that summarizes old messages rather <strong>than removing</strong> them. This idea led me to experiment and eventually implement <strong>SummarizingTokenWindowChatMemory</strong> .</p><h2 id="summarizingtokenwindowchatmemory"><strong>SummarizingTokenWindowChatMemory</strong></h2><p>The core idea behind <strong>SummarizingTokenWindowChatMemory</strong> is straightforward:</p><ol><li><strong>Monitor Chat Tokens:</strong> The system tracks the number of tokens used in a conversation.<li><strong>Trigger Summarization:</strong> The summarization process activates when the token count reaches a predefined threshold.<li><strong>Generate a Summary:</strong> Instead of storing full conversation logs, a summarizer condenses key information into a succinct, meaningful summary.<li><strong>Replace Old Messages:</strong> The summarized content replaces older messages, ensuring the conversation remains within token limits while maintaining continuity.</ol><p>Let’s look at the code:</p><pre><code class="language-java">package ca.bazlur.chefbot.ai;

import dev.langchain4j.data.message.ChatMessage;
import dev.langchain4j.data.message.SystemMessage;
import dev.langchain4j.internal.ValidationUtils;
import dev.langchain4j.memory.ChatMemory;
import dev.langchain4j.model.Tokenizer;
import dev.langchain4j.store.memory.chat.ChatMemoryStore;
import dev.langchain4j.store.memory.chat.InMemoryChatMemoryStore;
import lombok.extern.slf4j.Slf4j;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

@Slf4j
public class SummarizingTokenWindowChatMemory implements ChatMemory {

    private final Object id;
    private final int maxTokens;
    private final Tokenizer tokenizer;
    private final ChatMemoryStore store;
    private final Summarizer summarizer;

    private SummarizingTokenWindowChatMemory(Builder builder) {
        this.id = ValidationUtils.ensureNotNull(builder.id, "id");
        this.maxTokens = ValidationUtils.ensureGreaterThanZero(builder.maxTokens, "maxTokens");
        this.tokenizer = ValidationUtils.ensureNotNull(builder.tokenizer, "tokenizer");
        this.store = ValidationUtils.ensureNotNull(builder.store, "store");
        this.summarizer = ValidationUtils.ensureNotNull(builder.summarizer, "summarizer");
    }

    @Override
    public Object id() {
        return id;
    }

    @Override
    public void add(ChatMessage message) {
        // Pull existing messages from store
        List&lt;ChatMessage&gt; messages = new ArrayList&lt;&gt;(store.getMessages(id));

        // If it's a system message, handle "replace existing system message" logic
        if (message instanceof SystemMessage) {
            Optional&lt;SystemMessage&gt; maybeSystem = findSystemMessage(messages);
            if (maybeSystem.isPresent()) {
                if (maybeSystem.get().equals(message)) {
                    // Same system message, do nothing
                    return;
                } else {
                    // Remove old system message so we can replace with new one
                    messages.remove(maybeSystem.get());
                }
            }
        }

        // Add the new message
        messages.add(message);

        // Enforce capacity by summarizing older messages if needed
        ensureSummarizedCapacity(messages);

        // Update store
        store.updateMessages(id, messages);
    }

    @Override
    public List&lt;ChatMessage&gt; messages() {
        // Return a copy of messages from store
        List&lt;ChatMessage&gt; messages = new ArrayList&lt;&gt;(store.getMessages(id));

        // (Optional) ensure capacity here again, if you want to guarantee it every time
        ensureSummarizedCapacity(messages);
        return messages;
    }

    @Override
    public void clear() {
        store.deleteMessages(id);
    }

    private void ensureSummarizedCapacity(List&lt;ChatMessage&gt; messages) {
        int currentTokenCount = tokenizer.estimateTokenCountInMessages(messages);
        if (currentTokenCount &lt;= maxTokens) {
            return; // We are within capacity
        }

        // If we exceed tokens, let's summarize the older messages (except system msg &amp; possibly the newest).
        // 1) Separate out the system message if present at index 0.
        // 2) Summarize everything from startIndex...up to near the end,
        //    leaving maybe the last user or assistant message "unsummarized" for context.
        // 3) Insert the summary as a single message, then re-check capacity.

        // First, handle any system message
        Optional&lt;SystemMessage&gt; maybeSystem = findSystemMessage(messages);
        maybeSystem.ifPresent(messages::remove);

        // Now we can work with the non-system messages
        int startIndex = 0;
        int endIndex = messages.size() - 1; // Leave the last message for context

        // Don't try to summarize if we have 2 or fewer messages
        if (endIndex - startIndex &lt;= 1) {
            // If we can't summarize, fall back to just removing oldest messages
            removeOldestUntilFit(messages);
            // Re-add system message if we had one
            maybeSystem.ifPresent(messages::addFirst);
            return;
        }

        // Get the messages to summarize (everything except maybe system &amp; last)
        List&lt;ChatMessage&gt; toSummarize = new ArrayList&lt;&gt;(messages.subList(startIndex, endIndex));

        // Generate the summary
        String summary = summarizer.summarize(toSummarize);

        // Replace the summarized messages with the summary
        messages.subList(startIndex, endIndex).clear();
        messages.add(startIndex, SystemMessage.from("Previous conversation summary: " + summary));

        // Re-add system message if we had one
        maybeSystem.ifPresent(messages::addFirst);

        // If we're still over capacity, remove oldest messages (after any system message)
        if (tokenizer.estimateTokenCountInMessages(messages) &gt; maxTokens) {
            removeOldestUntilFit(messages);
        }
    }

    private void removeOldestUntilFit(List&lt;ChatMessage&gt; messages) {
        // Keep system message if present
        Optional&lt;SystemMessage&gt; maybeSystem = findSystemMessage(messages);
        maybeSystem.ifPresent(messages::remove);

        // Remove oldest messages until we're under token limit
        while (!messages.isEmpty() &amp;&amp; tokenizer.estimateTokenCountInMessages(messages) &gt; maxTokens) {
            messages.removeFirst();
        }

        // Re-add system message if we had one
        maybeSystem.ifPresent(messages::addFirst);
    }

    private Optional&lt;SystemMessage&gt; findSystemMessage(List&lt;ChatMessage&gt; messages) {
        if (!messages.isEmpty() &amp;&amp; messages.getFirst() instanceof SystemMessage) {
            return Optional.of((SystemMessage) messages.getFirst());
        }
        return Optional.empty();
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder {
        private Object id;
        private Integer maxTokens;
        private Tokenizer tokenizer;
        private ChatMemoryStore store = new InMemoryChatMemoryStore();
        private Summarizer summarizer;

        public Builder id(Object id) {
            this.id = id;
            return this;
        }

        public Builder maxTokens(Integer maxTokens, Tokenizer tokenizer) {
            this.maxTokens = maxTokens;
            this.tokenizer = tokenizer;
            return this;
        }

        public Builder chatMemoryStore(ChatMemoryStore store) {
            this.store = store;
            return this;
        }

        public Builder summarizer(Summarizer summarizer) {
            this.summarizer = summarizer;
            return this;
        }

        public SummarizingTokenWindowChatMemory build() {
            return new SummarizingTokenWindowChatMemory(this);
        }
    }
}
</code></pre><p>The <strong>SummarizingTokenWindowChatMemory</strong> class manages chat messages, ensuring they stay within a specified token limit by summarizing older messages when necessary. It uses an <a href="https://javadoc.io/doc/dev.langchain4j/langchain4j-open-ai/latest/dev/langchain4j/model/openai/OpenAiTokenizer.html"><strong>OpenAiTokenizer</strong></a> to estimate token counts and a <strong>Summarizer</strong> to generate summaries. The class also handles system messages separately, preserving them during summarization. The `Builder` class provides a convenient way to construct <strong>SummarizingTokenWindowChatMemory</strong> instances with the required dependencies.</p><p>Now, let’s work on the <strong>Sumerizer</strong>.</p><h3 id="the-summarizer-interface"><strong>The Summarizer Interface</strong></h3><p>At its core, <strong>OpenAILLMSummarizer</strong> implements the Summarizer interface:</p><pre><code class="language-java">import dev.langchain4j.data.message.ChatMessage;

import java.util.List;

public interface Summarizer {
    String summarize(List&lt;ChatMessage&gt; messages);
}
</code></pre><p>This provides a contract for any summarization strategy.</p><h3 id="summarization-logic"><strong>Summarization Logic</strong></h3><p>The main implementation, <strong>OpenAILLMSummarizer</strong> , is responsible for processing chat history and condensing it into a summary:</p><pre><code class="language-java">package ca.bazlur.chefbot.ai;

import dev.langchain4j.data.message.AiMessage;
import dev.langchain4j.data.message.ChatMessage;
import dev.langchain4j.data.message.SystemMessage;
import dev.langchain4j.data.message.UserMessage;
import dev.langchain4j.model.openai.OpenAiChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.V;

import java.util.List;

public class OpenAILLMSummarizer implements Summarizer {

    private final int desiredTokenLimit;
    private final SummarizerAssistant assistant;

    public OpenAILLMSummarizer(OpenAiChatModel openAiChatModel, int desiredTokenLimit) {
        this.desiredTokenLimit = desiredTokenLimit;
        assistant = AiServices.builder(SummarizerAssistant.class)
                .chatLanguageModel(openAiChatModel)
                .build();
    }

    @Override
    public String summarize(List&lt;ChatMessage&gt; messages) {
        StringBuilder promptBuilder = new StringBuilder("Summarize the following conversation: \n");
        for (ChatMessage msg : messages) {
            if (msg instanceof UserMessage) {
                promptBuilder.append("User: ").append(((UserMessage) msg).contents()).append("\n");
            } else if (msg instanceof AiMessage) {
                promptBuilder.append("Assistant: ").append(((AiMessage) msg).text()).append("\n");
            } else if (msg instanceof SystemMessage) {
                promptBuilder.append("System: ").append(((SystemMessage) msg).text()).append("\n");
            }
        }

        String summary = assistant.summarize(promptBuilder.toString(), desiredTokenLimit);
        return summary.trim();
    }

}
</code></pre><ul><li>Constructs a structured prompt containing key user, AI, and system messages.<li>Invokes the <strong>SummarizerAssistant</strong> , which interacts with OpenAI’s language model to generate the summary.</ul><h3 id="llm-summarization"><strong>LLM Summarization</strong></h3><p>The <strong>SummarizerAssistant</strong> provides an AI-driven summarization method:</p><pre><code class="language-java">interface SummarizerAssistant {

    @dev.langchain4j.service.UserMessage("""
    You are a helpful assistant summarizing past conversation turns for a chatbot.

    Your goal is to create a concise and informative summary of the provided conversation history, 
    focusing on key information relevant to continuing the conversation.  
    Pay close attention to user preferences, requests, and any decisions they have made.  
    Also note any specific topics or tasks discussed.  Be sure to retain information that might be needed 
    to fulfill a user request or provide a relevant response.

    The summary should be under {desiredTokenLimit} tokens and written in a clear, natural language style.  
    Avoid simply listing the turns.  Instead, synthesize the information into a coherent narrative.

    Conversation History:
    {message}
    """)
    String summarize(@V("message") String messages, @V("desiredTokenLimit") int desiredTokenLimit);
}
</code></pre><p>This mechanism:</p><ul><li>Calls an <strong>LLM model</strong> (e.g., OpenAI’s GPT) to generate concise summaries.<li>Ensures that the summarized conversation remains within a predefined token limit.</ul><h2 id="why-this-matters">Why This Matters</h2><p>The <strong>SummarizingTokenWindowChatMemory</strong> approach effectively manages long conversations while staying within the constraints of an LLM’s context window. The chatbot can retain essential details by summarizing older exchanges, ensuring coherence without exceeding token limits. This results in a more fluid and engaging user experience, where the chatbot can “remember” and refer back to past interactions naturally. Additionally, it optimizes efficiency by reducing the amount of text processed with each request, potentially leading to faster response times and lower costs. This makes it particularly valuable when maintaining conversational history, which is crucial for customer support, complex problem-solving, or multi-turn discussions.</p><p>That said, this approach isn’t without its challenges. The very nature of summarization means that some details—especially infrequent ones—might get lost in the process. This could occasionally impact the chatbot’s ability to deliver the most precise or personalized responses. Moreover, the summarization step itself adds computational overhead, and its effectiveness heavily depends on the prompt design and the capabilities of the underlying LLM. Another potential issue is <strong>contextual drift</strong> —over multiple rounds of summarization, the chatbot’s understanding of the conversation could gradually shift away from its original meaning. These trade-offs must be carefully weighed when deciding whether this approach is the right fit for a given application.</p><h2 id="conclusion">Conclusion</h2><p>To test its functionality, I created a simple chatbot that suggests recipes. The chatbot will ask you a few questions and recommend a recipe based on your responses. As the conversation progresses, the chatbot will start summarizing older messages to retain essential context while staying within the allowed token threshold if the token limit is exceeded.</p><p>The source code is here: <a href="https://github.com/rokon12/chefbot">https://github.com/rokon12/chefbot</a></p><p><img src="/images/screenshot-2025-02-14-at-1.04.29-am.png" alt="" /></p><hr /><p>Type your email… {#subscribe-email}</p></div></div><div class="original-article-notice"><p>✨ This article was originally published at <a href="https://bazlur.ca/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/" target="_blank" rel="noopener">https://bazlur.ca/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/</a></p></div><div class="newsletter-cta"><div class="newsletter-content"><h3>📬 Stay Updated with My Newsletter</h3><p>Want to keep in touch and learn more about:</p><ul><li>☕ Java & all the new features coming along<li>🧵 Concurrency & Virtual Threads<li>🧠 LLMs, LangChain4j & AI Integration<li>🚀 Quarkus, Spring & Jakarta EE</ul><p>Subscribe to my newsletter for regular updates, tips, and insights delivered straight to your inbox!</p><a href="https://bazlur.substack.com/" target="_blank" rel="noopener" class="newsletter-button"> Subscribe Now </a></div></div><div class="social-follow-cta"><h3>🌐 Let's Connect!</h3><p>Follow me on social media for more updates, insights, and discussions:</p><div class="social-links-grid"> <a href="https://www.linkedin.com/in/bazlur/" target="_blank" rel="noopener" class="social-link linkedin"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/> </svg> LinkedIn </a> <a href="https://x.com/bazlur_rahman" target="_blank" rel="noopener" class="social-link twitter"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> X (Twitter) </a> <a href="https://bsky.app/profile/bazlur.ca" target="_blank" rel="noopener" class="social-link bluesky"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 11.388c-.906-1.761-3.372-5.044-5.665-6.662-2.197-1.552-3.48-1.415-4.068-.936-.786.641-.581 2.039-.241 3.121.269.857 1.135 3.24 1.135 3.24s-3.999 1.395-4.077 4.106c-.04 1.4.52 2.416 1.492 3.029 3.174 2.001 5.503-2.192 7.301-3.79a.878.878 0 0 1 1.238 0c1.798 1.598 4.127 5.791 7.301 3.79.972-.613 1.532-1.629 1.492-3.029-.078-2.711-4.077-4.106-4.077-4.106s.866-2.383 1.135-3.24c.34-1.082.545-2.48-.241-3.121-.588-.479-1.871-.616-4.068.936C15.372 6.344 12.906 9.627 12 11.388z"/> </svg> Bluesky </a> <a href="https://github.com/rokon12" target="_blank" rel="noopener" class="social-link github"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/> </svg> GitHub </a> <a href="https://www.infoq.com/profile/A-N-M-Bazlur-Rahman/#allActivity" target="_blank" rel="noopener" class="social-link infoq"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/> </svg> InfoQ </a></div></div><footer class="post-footer"><div class="post-tags-footer"><h4>Topics covered in this article:</h4><div class="post-tags-list"> <a href="/tags/java%20programming/" class="post-tag-pill">java programming</a> <a href="/tags/java%2011/" class="post-tag-pill">java 11</a> <a href="/tags/java%2021/" class="post-tag-pill">java 21</a> <a href="/tags/java%20cli/" class="post-tag-pill">java cli</a> <a href="/tags/java%20code/" class="post-tag-pill">java code</a></div></div><div class="post-meta-footer"><p><em>Article archived on August 05, 2025 at 10:23 PM</em></p></div><div class="post-nav"> <a class="prev" href="/2025/01/07/a-journey-of-the-heart-visiting-madinah-and-makkah/"> <span style="font-size: 0.9rem; color: #6b7280;">← Previous</span><br> <strong>A Journey of the Heart: Visiting Madinah and Ma...</strong> </a> <a class="next" href="/2025/02/21/diy-jvm-part-1-decoding-the-magic-parsing-java/"> <span style="font-size: 0.9rem; color: #6b7280;">Next →</span><br> <strong>DIY JVM Part 1: Decoding the Magic – Parsing Java</strong> </a></div></footer><div class="share-buttons"><h3 class="share-title">Share this article</h3><div class="share-buttons-grid"> <button class="share-button share-twitter" onclick="shareOnTwitter('SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization', 'http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/')" aria-label="Share on Twitter"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> <span>Twitter</span> </button> <button class="share-button share-linkedin" onclick="shareOnLinkedIn('SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization', 'http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/')" aria-label="Share on LinkedIn"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/> </svg> <span>LinkedIn</span> </button> <button class="share-button share-copy" onclick="copyToClipboard('http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/')" aria-label="Copy link"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> <span>Copy Link</span> </button> <button class="share-button share-email" onclick="shareViaEmail('SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization', 'http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/')" aria-label="Share via email"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline> </svg> <span>Email</span> </button> <button class="share-button share-reddit" onclick="shareOnReddit('SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization', 'http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/')" aria-label="Share on Reddit"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/> </svg> <span>Reddit</span> </button> <button class="share-button share-hackernews" onclick="shareOnHackerNews('SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization', 'http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/')" aria-label="Share on Hacker News"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M0 0v24h24V0H0zm12.8 17.7h-1.6v-5.5L8.4 6.3H10l1.8 4.1.2.5.2-.5 1.8-4.1h1.6l-2.8 5.9v5.5z"/> </svg> <span>HN</span> </button></div><button class="share-button share-native" onclick="nativeShare('SummarizingTokenWindowChatMemory: Enhancing LLM’s Conversations with Efficient Summarization', ' ', 'http://localhost:4001/2025/02/14/summarizingtokenwindowchatmemory-enhancing-llms-conversations-with-efficient-summarization/')" aria-label="Share"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"> <circle cx="18" cy="5" r="3"></circle> <circle cx="6" cy="12" r="3"></circle> <circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line> </svg> <span>Share</span> </button></div><div class="share-toast" id="share-toast"> <span class="share-toast-message"></span></div><script> // Share on Twitter/X function shareOnTwitter(title, url) { const text = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://twitter.com/intent/tweet?text=${text}&url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('twitter'); } // Share on LinkedIn function shareOnLinkedIn(title, url) { const shareUrl = encodeURIComponent(url); window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('linkedin'); } // Share on Reddit function shareOnReddit(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://www.reddit.com/submit?title=${shareTitle}&url=${shareUrl}`, '_blank', 'width=850,height=550'); trackShare('reddit'); } // Share on HackerNews function shareOnHackerNews(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://news.ycombinator.com/submitlink?t=${shareTitle}&u=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('hackernews'); } // Share via Email function shareViaEmail(title, url) { const subject = encodeURIComponent(`Check out: ${title}`); const body = encodeURIComponent(`I thought you might find this interesting:\n\n${title}\n${url}\n\nFrom Bazlur's Archive`); window.location.href = `mailto:?subject=${subject}&body=${body}`; trackShare('email'); } // Copy to clipboard function copyToClipboard(url) { // Create temporary input element const temp = document.createElement('input'); temp.value = url; document.body.appendChild(temp); temp.select(); try { // Try modern API first if (navigator.clipboard) { navigator.clipboard.writeText(url).then(() => { showToast('Link copied to clipboard!'); animateCopyButton(); }); } else { // Fallback for older browsers document.execCommand('copy'); showToast('Link copied to clipboard!'); animateCopyButton(); } } catch (err) { showToast('Failed to copy link'); } document.body.removeChild(temp); trackShare('copy'); } // Native share API (mobile) function nativeShare(title, text, url) { if (navigator.share) { navigator.share({ title: title, text: text, url: url }).then(() => { trackShare('native'); }).catch((error) => { if (error.name !== 'AbortError') { console.log('Error sharing:', error); } }); } else { // Fallback to copy link copyToClipboard(url); } } // Show toast notification function showToast(message) { const toast = document.getElementById('share-toast'); const toastMessage = toast.querySelector('.share-toast-message'); toastMessage.textContent = message; toast.classList.add('show'); setTimeout(() => { toast.classList.remove('show'); }, 3000); } // Animate copy button function animateCopyButton() { const copyButton = document.querySelector('.share-copy'); copyButton.classList.add('copied'); // Change icon temporarily const span = copyButton.querySelector('span'); const originalText = span.textContent; span.textContent = 'Copied!'; setTimeout(() => { copyButton.classList.remove('copied'); span.textContent = originalText; }, 2000); } // Track share events (for analytics if needed) function trackShare(platform) { console.log(`Shared on ${platform}`); // You can add analytics tracking here } // Show native share button only if supported document.addEventListener('DOMContentLoaded', function() { const nativeButton = document.querySelector('.share-native'); if (!navigator.share) { nativeButton.style.display = 'none'; } else { // Hide native button on desktop if (window.innerWidth > 768) { nativeButton.style.display = 'none'; } } }); </script><style> .share-buttons { margin: 40px 0; padding: 30px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05)); border: 1px solid rgba(102, 126, 234, 0.2); border-radius: 16px; } .share-title { font-size: 18px; margin-bottom: 20px; color: #667eea; font-family: 'JetBrains Mono', monospace; text-align: center; } .share-buttons-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; max-width: 600px; margin: 0 auto; } .share-button { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 16px; background: #1a1a2e; border: 2px solid #313244; border-radius: 12px; color: #ccc; font-size: 14px; font-family: 'JetBrains Mono', monospace; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; } .share-button::before { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; background: rgba(102, 126, 234, 0.3); transform: translate(-50%, -50%); transition: width 0.6s, height 0.6s; } .share-button:hover::before { width: 300px; height: 300px; } .share-button:hover { transform: translateY(-2px); border-color: #667eea; color: #fff; box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2); } .share-button svg { position: relative; z-index: 1; } .share-button span { position: relative; z-index: 1; } /* Platform-specific colors on hover */ .share-twitter:hover { border-color: #1DA1F2; color: #1DA1F2; } .share-linkedin:hover { border-color: #0077B5; color: #0077B5; } .share-reddit:hover { border-color: #FF4500; color: #FF4500; } .share-hackernews:hover { border-color: #FF6600; color: #FF6600; } .share-email:hover { border-color: #764ba2; color: #764ba2; } .share-copy:hover, .share-copy.copied { border-color: #10b981; color: #10b981; } .share-copy.copied { animation: successPulse 0.5s ease; } @keyframes successPulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } } /* Native share button (mobile) */ .share-native { display: none; width: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border: none; color: white; font-weight: 600; margin-top: 12px; } .share-native:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3); } /* Toast notification */ .share-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); z-index: 10000; opacity: 0; transition: all 0.3s ease; font-family: 'JetBrains Mono', monospace; } .share-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); } /* Mobile responsive */ @media (max-width: 768px) { .share-buttons-grid { grid-template-columns: repeat(3, 1fr); } .share-native { display: flex; } .share-button span { display: none; } .share-button { padding: 12px; } } /* Dark theme adjustments */ [data-theme="dracula"] .share-button, [data-theme="nord"] .share-button, [data-theme="monokai"] .share-button { background: var(--bg-secondary); border-color: var(--accent); } /* Print styles */ @media print { .share-buttons { display: none; } }</style><div class="related-posts-section"><h2 class="related-posts-header"> <span class="gradient-text">Related Articles</span></h2><div class="related-posts-grid"><article class="related-post-card"> <a href="/2025/01/07/a-journey-of-the-heart-visiting-madinah-and-makkah/" class="related-post-link"><div class="related-post-content"><h3 class="related-post-title">A Journey of the Heart: Visiting Madinah and Makkah</h3><time class="related-post-date" datetime="2025-01-07T00:00:00+00:00"> January 07, 2025 </time><p class="related-post-excerpt"></p><div class="related-post-tags"> <span class="related-post-tag">java programming</span> <span class="related-post-tag">java 11</span> <span class="related-post-tag">java 21</span> <span class="related-post-tag">+2</span></div></div><div class="related-post-arrow"> <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7 5L12 10L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg></div></a></article><article class="related-post-card"> <a href="/2024/10/27/java-tips-01-writing-shebang-scripts-in-pure-java/" class="related-post-link"><div class="related-post-content"><h3 class="related-post-title">Java Tips # 01 – Writing Shebang Scripts in Pure Java</h3><time class="related-post-date" datetime="2024-10-27T00:00:00+00:00"> October 27, 2024 </time><p class="related-post-excerpt"></p><div class="related-post-tags"> <span class="related-post-tag">java programming</span> <span class="related-post-tag">java 11</span> <span class="related-post-tag">java 21</span> <span class="related-post-tag">+2</span></div></div><div class="related-post-arrow"> <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7 5L12 10L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg></div></a></article><article class="related-post-card"> <a href="/2024/09/11/family-castles-and-code-exploring-europes-old-cities/" class="related-post-link"><div class="related-post-content"><h3 class="related-post-title">Family, Castles, and Code: Exploring Europe’s Old Cities</h3><time class="related-post-date" datetime="2024-09-11T00:00:00+00:00"> September 11, 2024 </time><p class="related-post-excerpt"></p><div class="related-post-tags"> <span class="related-post-tag">java programming</span> <span class="related-post-tag">java 11</span> <span class="related-post-tag">java 21</span> <span class="related-post-tag">+2</span></div></div><div class="related-post-arrow"> <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7 5L12 10L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg></div></a></article><article class="related-post-card"> <a href="/2024/07/18/creating-a-command-line-tool-with-jbang-and-picocli-to-generate-release-notes/" class="related-post-link"><div class="related-post-content"><h3 class="related-post-title">Creating a Command Line Tool with JBang and PicoCLI to Generate Release Notes</h3><time class="related-post-date" datetime="2024-07-18T00:00:00+00:00"> July 18, 2024 </time><p class="related-post-excerpt"></p><div class="related-post-tags"> <span class="related-post-tag">java programming</span> <span class="related-post-tag">java 11</span> <span class="related-post-tag">java 21</span> <span class="related-post-tag">+2</span></div></div><div class="related-post-arrow"> <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7 5L12 10L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg></div></a></article><article class="related-post-card"> <a href="/2024/07/11/unsafe-is-finally-going-away-embracing-safer-memory-access-with-jep-471/" class="related-post-link"><div class="related-post-content"><h3 class="related-post-title">Unsafe is Finally Going Away: Embracing Safer Memory Access with JEP 471</h3><time class="related-post-date" datetime="2024-07-11T00:00:00+00:00"> July 11, 2024 </time><p class="related-post-excerpt"></p><div class="related-post-tags"> <span class="related-post-tag">java programming</span> <span class="related-post-tag">java 11</span> <span class="related-post-tag">java 21</span> <span class="related-post-tag">+2</span></div></div><div class="related-post-arrow"> <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7 5L12 10L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg></div></a></article></div></div></div></article></main><footer class="site-footer"><div class="footer-content"><p>A comprehensive archive of articles on Java, Software Development, and Technology</p><p>© 2025 A N M Bazlur Rahman. All articles are archived from <a href="https://bazlur.ca">bazlur.ca</a></p><p> <a href="/feed.xml">RSS Feed</a> • <a href="https://twitter.com/bazlur_rahman">Twitter</a> • <a href="https://github.com/rokon12">GitHub</a></p></div></footer><script> // Fade-in animations on scroll document.addEventListener('DOMContentLoaded', function() { const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -100px 0px' }; const observer = new IntersectionObserver(function(entries) { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } }); }, observerOptions); // Observe fade-in elements document.querySelectorAll('.fade-in, .fade-in-up, .fade-in-left, .fade-in-right, .stagger-animation').forEach(el => { observer.observe(el); }); // Add fade-in classes to post cards document.querySelectorAll('.post-card').forEach((card, index) => { card.classList.add('fade-in-up'); card.style.transitionDelay = `${index * 0.1}s`; }); // Removed duplicate image observer - handled by image-optimization.js }); </script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" data-manual></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script> <script defer src="/assets/js/prism-setup.js"></script> <script defer src="/assets/js/terminal.js"></script> <script defer src="/assets/js/image-optimization.js"></script> <script> if ('loading' in HTMLImageElement.prototype) { const images = document.querySelectorAll('img[loading="lazy"]'); images.forEach(img => { img.src = img.dataset.src || img.src; }); } else { // Fallback for browsers that don't support lazy loading const script = document.createElement('script'); script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js'; document.body.appendChild(script); } </script><div class="reading-progress" id="reading-progress"></div><script> document.addEventListener('scroll', function() { const winScroll = document.body.scrollTop || document.documentElement.scrollTop; const height = document.documentElement.scrollHeight - document.documentElement.clientHeight; const scrolled = (winScroll / height) * 100; document.getElementById("reading-progress").style.width = scrolled + "%"; }); </script> <script> document.addEventListener('DOMContentLoaded', function() { // Mobile menu toggle const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const siteNav = document.querySelector('.site-nav'); if (mobileMenuToggle) { mobileMenuToggle.addEventListener('click', function() { const isExpanded = this.getAttribute('aria-expanded') === 'true'; this.setAttribute('aria-expanded', !isExpanded); siteNav.classList.toggle('is-active'); document.body.classList.toggle('menu-open'); }); // Close menu when clicking outside document.addEventListener('click', function(e) { if (!e.target.closest('.site-header') && siteNav.classList.contains('is-active')) { mobileMenuToggle.setAttribute('aria-expanded', 'false'); siteNav.classList.remove('is-active'); document.body.classList.remove('menu-open'); } }); } // Initialize theme const savedTheme = localStorage.getItem('theme') || 'dark'; document.documentElement.setAttribute('data-theme', savedTheme); // Global search shortcut document.addEventListener('keydown', function(e) { // Focus search with / if (e.key === '/' && !e.metaKey && !e.ctrlKey) { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement !== searchInput) { e.preventDefault(); searchInput.focus(); document.body.classList.add('search-focused'); } } // Clear focus on ESC if (e.key === 'Escape') { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement === searchInput) { searchInput.blur(); searchInput.value = ''; document.body.classList.remove('search-focused'); } } }); }); </script> <button class="back-to-top" id="back-to-top" aria-label="Back to top"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline> </svg> </button> <script> document.addEventListener('DOMContentLoaded', function() { const backToTopButton = document.getElementById('back-to-top'); // Show/hide button based on scroll position function toggleBackToTop() { if (window.scrollY > 300) { backToTopButton.classList.add('visible'); } else { backToTopButton.classList.remove('visible'); } } // Throttle scroll events let isScrolling = false; window.addEventListener('scroll', function() { if (!isScrolling) { window.requestAnimationFrame(function() { toggleBackToTop(); isScrolling = false; }); isScrolling = true; } }); // Smooth scroll to top backToTopButton.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); }); // Initial check toggleBackToTop(); }); </script> <script> if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { console.log('ServiceWorker registration successful'); }, function(err) { console.log('ServiceWorker registration failed: ', err); }); }); } </script>