<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="https://bazlur.ca/2022/02/08/java-thread-programming-part-13/"><title>Java Thread Programming (Part 13) | Bazlur’s Blog Archive</title><meta name="generator" content="Jekyll v3.9.5" /><meta property="og:title" content="Java Thread Programming (Part 13)" /><meta name="author" content="A N M Bazlur Rahman" /><meta property="og:locale" content="en_US" /><meta name="description" content="Java Thread Programming (Part 13)" /><meta property="og:description" content="Java Thread Programming (Part 13)" /><link rel="canonical" href="http://localhost:4000/2022/02/08/java-thread-programming-part-13/" /><meta property="og:url" content="http://localhost:4000/2022/02/08/java-thread-programming-part-13/" /><meta property="og:site_name" content="Bazlur’s Blog Archive" /><meta property="og:image" content="http://localhost:4000/assets/img/default-og.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-08T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="http://localhost:4000/assets/img/default-og.jpg" /><meta property="twitter:title" content="Java Thread Programming (Part 13)" /><meta name="twitter:site" content="@bazlur_rahman" /><meta name="twitter:creator" content="@A N M Bazlur Rahman" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"A N M Bazlur Rahman"},"dateModified":"2022-02-08T00:00:00-05:00","datePublished":"2022-02-08T00:00:00-05:00","description":"Java Thread Programming (Part 13)","headline":"Java Thread Programming (Part 13)","image":"http://localhost:4000/assets/img/default-og.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2022/02/08/java-thread-programming-part-13/"},"url":"http://localhost:4000/2022/02/08/java-thread-programming-part-13/"}</script><style> /* Critical CSS - Inline for faster initial render */ :root { --primary-color: #2563eb; --secondary-color: #7c3aed; --text-color: #1f2937; --text-light: #6b7280; --bg-color: #ffffff; --bg-gray: #f9fafb; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; line-height: 1.6; color: var(--text-color); background: var(--bg-gray); } .wrapper { max-width: 1200px; margin: 0 auto; padding: 0 2rem; } header { background: var(--bg-color); box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; } .site-nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; } .site-title { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; } .nav-links { display: flex; gap: 2rem; list-style: none; } .nav-links a { color: var(--text-color); text-decoration: none; transition: color 0.2s; } .nav-links a:hover { color: var(--primary-color); } /* Above-the-fold home page styles */ .banner-container { margin: 2rem auto 3rem; text-align: center; } .ascii-banner { display: inline-block; font-family: 'JetBrains Mono', monospace; font-size: 11px; line-height: 1.2; color: var(--primary-color); } @media (max-width: 768px) { .wrapper { padding: 0 1rem; } .ascii-banner { font-size: 6px; } .nav-links { gap: 1rem; } }</style><link rel="preload" href="/assets/css/main.css?v=2" as="style" onload="this.onload=null;this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="/assets/css/main.css?v=2"></noscript><link rel="alternate" type="application/rss+xml" title="Bazlur&#39;s Blog Archive" href="/feed.xml"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><body><header class="site-header"><div class="header-wrapper"> <a class="site-title" href="/">Bazlur&#39;s Blog Archive</a> <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false"> <span class="hamburger"> <span></span> <span></span> <span></span> </span> </button><nav class="site-nav"> <a class="nav-link" href="/">Home</a> <a class="nav-link" href="/archive">Archive</a> <a class="nav-link" href="/tags">Tags</a> <a class="nav-link" href="/search">Search</a> <a class="nav-link" href="https://bazlur.com/conference/" target="_blank" rel="noopener">Speaking</a> <a class="nav-link" href="/about">About</a> <a class="nav-link nav-link-external" href="https://bazlur.ca" target="_blank" rel="noopener">Original Site →</a></nav></div></header><main class="page-content" aria-label="Content"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><div class="post-header "><div class="wrapper"><h1 class="post-title p-name" itemprop="name headline">Java Thread Programming (Part 13)</h1><p class="post-meta"> <time class="dt-published" datetime="2022-02-07T19:00:00-05:00" itemprop="datePublished"> February 8, 2022 </time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span class="p-author h-card" itemprop="name">A N M Bazlur Rahman</span> </span></p><div class="post-tags-header"> <a href="/tags/thread%20programming/" class="post-tag-badge">thread programming</a> <a href="/tags/learning%20thread%20programming/" class="post-tag-badge">learning thread programming</a> <a href="/tags/concurrency/" class="post-tag-badge">concurrency</a> <a href="/tags/thread/" class="post-tag-badge">thread</a> <a href="/tags/threadpool/" class="post-tag-badge">threadpool</a></div></div></div><div class="wrapper post-wrapper-with-toc"><div class="post-container"><div class="post-content e-content" itemprop="articleBody"><h1 id="java-thread-programming-part-13">Java Thread Programming (Part 13)</h1><p><a href="https://foojay.io/today/java-thread-programming-part-12/">Our previous article</a> discussed different ways to create a Java thread pool and put and execute result-bearing tasks to the Pool. This article will go a bit in-depth about how many worker threads we could put in a pool to get the best result.</p><p>Using the Executors factory class, we can create our thread pool; however, all the factory methods internally create an instance of ThreadPoolExcutors. This class is the representation of ThreadPool that we use. We can directly create a pool invoking its constructor. The constructor takes 7 arguments:</p><ul><li><strong>corePoolSize</strong>: the number of threads that are always alive in the Pool, even when idle.<li><strong>maximumPoolSize</strong>: the maximum number of threads that the Pool allows.<li><strong>keepAliveTime</strong>: if the number of the threads becomes larger than the corePoolSize, if some of them are idle, they get terminated. This is the time thread will wait before getting terminated if they are idle.<li><strong>timeUnit</strong>: time unit of keepAliveArgument, if could millisecond, second, etc.<li><strong>workQueue</strong>: Ideally the tasks are kept into a blocking queue. This is the queue where we put the tasks.<li><strong>threadFactory:</strong> the factory that creates a new thread when needed. It creates all threads in the same ThreadGroup.<li><strong>handler</strong>: the handler to use when execution is blocked because the thread bounds and queue capacities are reached; for example, if capacities are reached, we want to reject the tasks.</ul><p>Let’s see an example:</p><pre><code class="language-java">package ca.bazlur;

import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingDeque;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.ThreadPoolExecutor.AbortPolicy;
import java.util.concurrent.TimeUnit;

public class Experiment {


  public static void main(String[] args) {
    var threadPool = new ThreadPoolExecutor(5, 25, 100, TimeUnit.MILLISECONDS, new LinkedBlockingDeque&lt;&gt;(),
        Executors.defaultThreadFactory(), new AbortPolicy());

    for (int i = 0; i &lt; 10; i++) {
      threadPool.submit(() -&gt; System.out.println("Hello \uD83C\uDF0E"));
    }

    threadPool.shutdown();
  }
}
</code></pre><p>In the above ThreadPool, the minimum threads count is 5, which is when we would create the Pool, 5 threads will be created immediately, and they will be kept around, waiting for tasks, even if they are idle. If we submit a task, these existing threads will pick it up.</p><p>The ThreadPoolExecutor has multiple constructors and the Executors factory class uses the combination of these constructors and creates ThreadPool for us and makes our life a bit easy.</p><p>However, the question still remains: what would be the minimum and the maximum number that we should use? Because this very critical to get the best performance. If we put too many, that may result in detrimental to the application’s performance.</p><p>Let’s discuss this a bit further.</p><h2 id="setting-up-the-maximum-number"><strong>Setting Up the Maximum Number</strong></h2><p>So the first question would be, what would be the maximum number? Well, the answer isn’t straightforward. It depends on the nature of the workload we are putting in and the hardware the application is running. It also depends on how often the individual task will block.</p><p>Let’s assume we have a machine with 4 CPUs; our goal is to maximize the usages of that 4 CPUs. That means we have to have at least 4 threads. This seems evident to us as if we have more CPU available and we use less thread, which means we are basically wasting our CPU. So, we better use all of them.</p><p>Now the question gets to be, does it make sense to have more than 4?</p><p>Well, to answer that question, we have to know the nature of the workload we are putting into the Pool. The nature of workload can be compute-bound. This sort of workload doesn’t make any external calls (e.g. database, API endpoint etc.). Also, they have no significant contention on a particular locking mechanism. For this sort of workload, it makes sense to have a maximum number of threads is equal to the number of CPUs. If we add more threads, that means we will have more context switching between threads. The thread scheduler would be super busy giving the time slice to each thread. Thus, the overall performance will be detrimental.</p><p>On the other hand, having more threads may yield a better result if the workload is IO-bound. Although having more threads has some penalties, most threads will be waiting for IO in an IO-bound workload. So, if we have 4 CPUs and 4 threads, eventually, they all will be waiting for IO to finish meanwhile, no work will be done. This is a waste of our precious CPU time. But, If we add more threads to the Pool, they may continue to work while others are waiting on IO.</p><blockquote><p>So now, we can safely say that if the workload is CPU intensive, adding more thread than the CPU size isn’t a good idea. However, this is precisely the opposite if we have IO-bound work.</p></blockquote><p>I have done an experiment with JMH (Java microbenchmark Harness) framework, and the result supports the above statement.</p><p><em>Github: <a href="https://github.com/rokon12/java-thread-programming-jhm">https://github.com/rokon12/java-thread-programming-jhm</a></em></p><p>Now the question is, how do we determine the exact number?</p><p>Well, it depends. There are no ideal numbers that fit all cases. So we have to do adequate testing to find out what is the best for our particular workload and application.</p><p>However, in a most typical scenario, we usually have a diverse set of tasks. And things go completed in such cases.</p><p>In “<a href="https://www.amazon.ca/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601/"><strong>Java Concurrency in Practice</strong></a>,” Brian Goetz provided a formula that we can use in most cases.</p><p><code>Number of threads = Number of Available Cores * (1 + Wait time / Service time)</code></p><p><strong>Waiting time</strong>– could IO, e.g., waiting for an HTTP response, acquiring Lock, etc.</p><p><strong>Service Time</strong>– is the time of computation, e.g. processing the HTTP response, marshalling/unmarshalling etc.</p><p>For example- an application calls an API and then processes it. If we have 8 processors in the application server, and then on average, the response time of the API is 100ms and the processing time of the response is 20ms, then the ideal size of thread would be –</p><pre><code class="language-java">N = 8 * ( 1 + 100/20)
  = 48
</code></pre><p>However, this is an oversimplification; adequate testing is always critical to figure out the number.</p><h2 id="setting-up-the-minimum-number">Setting Up the Minimum Number</h2><p>Once the maximum number of threads in the ThreadPool has been determined, we can think about the minimum. Honestly, it doesn’t even matter; in most cases, we will put the same number as the maximum number.</p><p>This is all for today. In the next article, we will discuss other aspects of ThreadPool, such as queue size and ForkJoinPool.</p><hr /><p>Type your email… {#subscribe-email}</p></div></div><div class="original-article-notice"><p>✨ This article was originally published at <a href="https://bazlur.ca/2022/02/08/java-thread-programming-part-13/" target="_blank" rel="noopener">https://bazlur.ca/2022/02/08/java-thread-programming-part-13/</a></p></div><div class="newsletter-cta"><div class="newsletter-content"><h3>📬 Stay Updated with My Newsletter</h3><p>Want to keep in touch and learn more about:</p><ul><li>☕ Java & all the new features coming along<li>🧵 Concurrency & Virtual Threads<li>🧠 LLMs, LangChain4j & AI Integration<li>🚀 Quarkus, Spring & Jakarta EE</ul><p>Subscribe to my newsletter for regular updates, tips, and insights delivered straight to your inbox!</p><a href="https://bazlur.substack.com/" target="_blank" rel="noopener" class="newsletter-button"> Subscribe Now </a></div></div><div class="social-follow-cta"><h3>🌐 Let's Connect!</h3><p>Follow me on social media for more updates, insights, and discussions:</p><div class="social-links-grid"> <a href="https://www.linkedin.com/in/bazlur/" target="_blank" rel="noopener" class="social-link linkedin"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/> </svg> LinkedIn </a> <a href="https://x.com/bazlur_rahman" target="_blank" rel="noopener" class="social-link twitter"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> X (Twitter) </a> <a href="https://bsky.app/profile/bazlur.ca" target="_blank" rel="noopener" class="social-link bluesky"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 11.388c-.906-1.761-3.372-5.044-5.665-6.662-2.197-1.552-3.48-1.415-4.068-.936-.786.641-.581 2.039-.241 3.121.269.857 1.135 3.24 1.135 3.24s-3.999 1.395-4.077 4.106c-.04 1.4.52 2.416 1.492 3.029 3.174 2.001 5.503-2.192 7.301-3.79a.878.878 0 0 1 1.238 0c1.798 1.598 4.127 5.791 7.301 3.79.972-.613 1.532-1.629 1.492-3.029-.078-2.711-4.077-4.106-4.077-4.106s.866-2.383 1.135-3.24c.34-1.082.545-2.48-.241-3.121-.588-.479-1.871-.616-4.068.936C15.372 6.344 12.906 9.627 12 11.388z"/> </svg> Bluesky </a> <a href="https://github.com/rokon12" target="_blank" rel="noopener" class="social-link github"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/> </svg> GitHub </a> <a href="https://www.infoq.com/profile/A-N-M-Bazlur-Rahman/#allActivity" target="_blank" rel="noopener" class="social-link infoq"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/> </svg> InfoQ </a></div></div><footer class="post-footer"><div class="post-tags-footer"><h4>Topics covered in this article:</h4><div class="post-tags-list"> <a href="/tags/thread%20programming/" class="post-tag-pill">thread programming</a> <a href="/tags/learning%20thread%20programming/" class="post-tag-pill">learning thread programming</a> <a href="/tags/concurrency/" class="post-tag-pill">concurrency</a> <a href="/tags/thread/" class="post-tag-pill">thread</a> <a href="/tags/threadpool/" class="post-tag-pill">threadpool</a></div></div><div class="post-meta-footer"><p><em>Article archived on August 05, 2025 at 10:25 PM</em></p></div><div class="post-nav"> <a class="prev" href="/2022/02/01/java-thread-programming-part-12/"> <span style="font-size: 0.9rem; color: #6b7280;">← Previous</span><br> <strong>Java Thread Programming (Part 12)</strong> </a> <a class="next" href="/2022/02/18/7-ways-to-improve-your-code-reading-skills/"> <span style="font-size: 0.9rem; color: #6b7280;">Next →</span><br> <strong>7 Ways to Improve Your Code Reading Skills</strong> </a></div></footer><div class="share-buttons"><h3 class="share-title">Share this article</h3><div class="share-buttons-grid"> <button class="share-button share-twitter" onclick="shareOnTwitter('Java Thread Programming (Part 13)', 'http://localhost:4000/2022/02/08/java-thread-programming-part-13/')" aria-label="Share on Twitter"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> <span>Twitter</span> </button> <button class="share-button share-linkedin" onclick="shareOnLinkedIn('Java Thread Programming (Part 13)', 'http://localhost:4000/2022/02/08/java-thread-programming-part-13/')" aria-label="Share on LinkedIn"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/> </svg> <span>LinkedIn</span> </button> <button class="share-button share-copy" onclick="copyToClipboard('http://localhost:4000/2022/02/08/java-thread-programming-part-13/')" aria-label="Copy link"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> <span>Copy Link</span> </button> <button class="share-button share-email" onclick="shareViaEmail('Java Thread Programming (Part 13)', 'http://localhost:4000/2022/02/08/java-thread-programming-part-13/')" aria-label="Share via email"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline> </svg> <span>Email</span> </button> <button class="share-button share-reddit" onclick="shareOnReddit('Java Thread Programming (Part 13)', 'http://localhost:4000/2022/02/08/java-thread-programming-part-13/')" aria-label="Share on Reddit"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/> </svg> <span>Reddit</span> </button> <button class="share-button share-hackernews" onclick="shareOnHackerNews('Java Thread Programming (Part 13)', 'http://localhost:4000/2022/02/08/java-thread-programming-part-13/')" aria-label="Share on Hacker News"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M0 0v24h24V0H0zm12.8 17.7h-1.6v-5.5L8.4 6.3H10l1.8 4.1.2.5.2-.5 1.8-4.1h1.6l-2.8 5.9v5.5z"/> </svg> <span>HN</span> </button></div><button class="share-button share-native" onclick="nativeShare('Java Thread Programming (Part 13)', 'Java Thread Programming (Part 13) ', 'http://localhost:4000/2022/02/08/java-thread-programming-part-13/')" aria-label="Share"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"> <circle cx="18" cy="5" r="3"></circle> <circle cx="6" cy="12" r="3"></circle> <circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line> </svg> <span>Share</span> </button></div><div class="share-toast" id="share-toast"> <span class="share-toast-message"></span></div><script> // Share on Twitter/X function shareOnTwitter(title, url) { const text = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://twitter.com/intent/tweet?text=${text}&url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('twitter'); } // Share on LinkedIn function shareOnLinkedIn(title, url) { const shareUrl = encodeURIComponent(url); window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('linkedin'); } // Share on Reddit function shareOnReddit(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://www.reddit.com/submit?title=${shareTitle}&url=${shareUrl}`, '_blank', 'width=850,height=550'); trackShare('reddit'); } // Share on HackerNews function shareOnHackerNews(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://news.ycombinator.com/submitlink?t=${shareTitle}&u=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('hackernews'); } // Share via Email function shareViaEmail(title, url) { const subject = encodeURIComponent(`Check out: ${title}`); const body = encodeURIComponent(`I thought you might find this interesting:\n\n${title}\n${url}\n\nFrom Bazlur's Archive`); window.location.href = `mailto:?subject=${subject}&body=${body}`; trackShare('email'); } // Copy to clipboard function copyToClipboard(url) { // Create temporary input element const temp = document.createElement('input'); temp.value = url; document.body.appendChild(temp); temp.select(); try { // Try modern API first if (navigator.clipboard) { navigator.clipboard.writeText(url).then(() => { showToast('Link copied to clipboard!'); animateCopyButton(); }); } else { // Fallback for older browsers document.execCommand('copy'); showToast('Link copied to clipboard!'); animateCopyButton(); } } catch (err) { showToast('Failed to copy link'); } document.body.removeChild(temp); trackShare('copy'); } // Native share API (mobile) function nativeShare(title, text, url) { if (navigator.share) { navigator.share({ title: title, text: text, url: url }).then(() => { trackShare('native'); }).catch((error) => { if (error.name !== 'AbortError') { console.log('Error sharing:', error); } }); } else { // Fallback to copy link copyToClipboard(url); } } // Show toast notification function showToast(message) { const toast = document.getElementById('share-toast'); const toastMessage = toast.querySelector('.share-toast-message'); toastMessage.textContent = message; toast.classList.add('show'); setTimeout(() => { toast.classList.remove('show'); }, 3000); } // Animate copy button function animateCopyButton() { const copyButton = document.querySelector('.share-copy'); copyButton.classList.add('copied'); // Change icon temporarily const span = copyButton.querySelector('span'); const originalText = span.textContent; span.textContent = 'Copied!'; setTimeout(() => { copyButton.classList.remove('copied'); span.textContent = originalText; }, 2000); } // Track share events (for analytics if needed) function trackShare(platform) { console.log(`Shared on ${platform}`); // You can add analytics tracking here } // Show native share button only if supported document.addEventListener('DOMContentLoaded', function() { const nativeButton = document.querySelector('.share-native'); if (!navigator.share) { nativeButton.style.display = 'none'; } else { // Hide native button on desktop if (window.innerWidth > 768) { nativeButton.style.display = 'none'; } } }); </script><style> .share-buttons { margin: 40px 0; padding: 30px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05)); border: 1px solid rgba(102, 126, 234, 0.2); border-radius: 16px; } .share-title { font-size: 18px; margin-bottom: 20px; color: #667eea; font-family: 'JetBrains Mono', monospace; text-align: center; } .share-buttons-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; max-width: 600px; margin: 0 auto; } .share-button { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 16px; background: #1a1a2e; border: 2px solid #313244; border-radius: 12px; color: #ccc; font-size: 14px; font-family: 'JetBrains Mono', monospace; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; } .share-button::before { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; background: rgba(102, 126, 234, 0.3); transform: translate(-50%, -50%); transition: width 0.6s, height 0.6s; } .share-button:hover::before { width: 300px; height: 300px; } .share-button:hover { transform: translateY(-2px); border-color: #667eea; color: #fff; box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2); } .share-button svg { position: relative; z-index: 1; } .share-button span { position: relative; z-index: 1; } /* Platform-specific colors on hover */ .share-twitter:hover { border-color: #1DA1F2; color: #1DA1F2; } .share-linkedin:hover { border-color: #0077B5; color: #0077B5; } .share-reddit:hover { border-color: #FF4500; color: #FF4500; } .share-hackernews:hover { border-color: #FF6600; color: #FF6600; } .share-email:hover { border-color: #764ba2; color: #764ba2; } .share-copy:hover, .share-copy.copied { border-color: #10b981; color: #10b981; } .share-copy.copied { animation: successPulse 0.5s ease; } @keyframes successPulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } } /* Native share button (mobile) */ .share-native { display: none; width: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border: none; color: white; font-weight: 600; margin-top: 12px; } .share-native:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3); } /* Toast notification */ .share-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); z-index: 10000; opacity: 0; transition: all 0.3s ease; font-family: 'JetBrains Mono', monospace; } .share-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); } /* Mobile responsive */ @media (max-width: 768px) { .share-buttons-grid { grid-template-columns: repeat(3, 1fr); } .share-native { display: flex; } .share-button span { display: none; } .share-button { padding: 12px; } } /* Dark theme adjustments */ [data-theme="dracula"] .share-button, [data-theme="nord"] .share-button, [data-theme="monokai"] .share-button { background: var(--bg-secondary); border-color: var(--accent); } /* Print styles */ @media print { .share-buttons { display: none; } }</style><div class="related-posts-section"><h2 class="related-posts-header"> <span class="gradient-text">Related Articles</span></h2><p class="no-related-posts">No related articles found. Check back later for more content!</p></div></div></article></main><footer class="site-footer"><div class="footer-content"><p>A comprehensive archive of articles on Java, Software Development, and Technology</p><p>© 2025 A N M Bazlur Rahman. All articles are archived from <a href="https://bazlur.ca">bazlur.ca</a></p><p> <a href="/feed.xml">RSS Feed</a> • <a href="https://twitter.com/bazlur_rahman">Twitter</a> • <a href="https://github.com/rokon12">GitHub</a></p></div></footer><script> // Fade-in animations on scroll document.addEventListener('DOMContentLoaded', function() { const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -100px 0px' }; const observer = new IntersectionObserver(function(entries) { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } }); }, observerOptions); // Observe fade-in elements document.querySelectorAll('.fade-in, .fade-in-up, .fade-in-left, .fade-in-right, .stagger-animation').forEach(el => { observer.observe(el); }); // Add fade-in classes to post cards document.querySelectorAll('.post-card').forEach((card, index) => { card.classList.add('fade-in-up'); card.style.transitionDelay = `${index * 0.1}s`; }); // Removed duplicate image observer - handled by image-optimization.js }); </script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" data-manual></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script> <script defer src="/assets/js/prism-setup.js"></script> <script defer src="/assets/js/terminal.js"></script> <script defer src="/assets/js/image-optimization.js"></script> <script> if ('loading' in HTMLImageElement.prototype) { const images = document.querySelectorAll('img[loading="lazy"]'); images.forEach(img => { img.src = img.dataset.src || img.src; }); } else { // Fallback for browsers that don't support lazy loading const script = document.createElement('script'); script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js'; document.body.appendChild(script); } </script><div class="reading-progress" id="reading-progress"></div><script> document.addEventListener('scroll', function() { const winScroll = document.body.scrollTop || document.documentElement.scrollTop; const height = document.documentElement.scrollHeight - document.documentElement.clientHeight; const scrolled = (winScroll / height) * 100; document.getElementById("reading-progress").style.width = scrolled + "%"; }); </script> <script> document.addEventListener('DOMContentLoaded', function() { // Mobile menu toggle const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const siteNav = document.querySelector('.site-nav'); if (mobileMenuToggle) { mobileMenuToggle.addEventListener('click', function() { const isExpanded = this.getAttribute('aria-expanded') === 'true'; this.setAttribute('aria-expanded', !isExpanded); siteNav.classList.toggle('is-active'); document.body.classList.toggle('menu-open'); }); // Close menu when clicking outside document.addEventListener('click', function(e) { if (!e.target.closest('.site-header') && siteNav.classList.contains('is-active')) { mobileMenuToggle.setAttribute('aria-expanded', 'false'); siteNav.classList.remove('is-active'); document.body.classList.remove('menu-open'); } }); } // Initialize theme const savedTheme = localStorage.getItem('theme') || 'dark'; document.documentElement.setAttribute('data-theme', savedTheme); // Global search shortcut document.addEventListener('keydown', function(e) { // Focus search with / if (e.key === '/' && !e.metaKey && !e.ctrlKey) { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement !== searchInput) { e.preventDefault(); searchInput.focus(); document.body.classList.add('search-focused'); } } // Clear focus on ESC if (e.key === 'Escape') { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement === searchInput) { searchInput.blur(); searchInput.value = ''; document.body.classList.remove('search-focused'); } } }); }); </script> <button class="back-to-top" id="back-to-top" aria-label="Back to top"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline> </svg> </button> <script> document.addEventListener('DOMContentLoaded', function() { const backToTopButton = document.getElementById('back-to-top'); // Show/hide button based on scroll position function toggleBackToTop() { if (window.scrollY > 300) { backToTopButton.classList.add('visible'); } else { backToTopButton.classList.remove('visible'); } } // Throttle scroll events let isScrolling = false; window.addEventListener('scroll', function() { if (!isScrolling) { window.requestAnimationFrame(function() { toggleBackToTop(); isScrolling = false; }); isScrolling = true; } }); // Smooth scroll to top backToTopButton.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); }); // Initial check toggleBackToTop(); }); </script> <script> if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { console.log('ServiceWorker registration successful'); }, function(err) { console.log('ServiceWorker registration failed: ', err); }); }); } </script>