<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="https://bazlur.ca/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/"><title>5 Things You Probably Didn’t Know About Java Concurrency | Bazlur’s Blog Archive</title><meta name="generator" content="Jekyll v3.9.5" /><meta property="og:title" content="5 Things You Probably Didn’t Know About Java Concurrency" /><meta name="author" content="A N M Bazlur Rahman" /><meta property="og:locale" content="en_US" /><meta name="description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><meta property="og:description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><link rel="canonical" href="http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/" /><meta property="og:url" content="http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/" /><meta property="og:site_name" content="Bazlur’s Blog Archive" /><meta property="og:image" content="http://localhost:4001/assets/img/default-og.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-25T00:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="http://localhost:4001/assets/img/default-og.jpg" /><meta property="twitter:title" content="5 Things You Probably Didn’t Know About Java Concurrency" /><meta name="twitter:site" content="@bazlur_rahman" /><meta name="twitter:creator" content="@A N M Bazlur Rahman" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"A N M Bazlur Rahman"},"dateModified":"2022-03-25T00:00:00-04:00","datePublished":"2022-03-25T00:00:00-04:00","description":"A comprehensive archive of articles on Java, Software Development, and Technology","headline":"5 Things You Probably Didn’t Know About Java Concurrency","image":"http://localhost:4001/assets/img/default-og.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/"},"url":"http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/"}</script><style> /* Critical CSS - Inline for faster initial render */ :root { --primary-color: #2563eb; --secondary-color: #7c3aed; --text-color: #1f2937; --text-light: #6b7280; --bg-color: #ffffff; --bg-gray: #f9fafb; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; line-height: 1.6; color: var(--text-color); background: var(--bg-gray); } .wrapper { max-width: 1200px; margin: 0 auto; padding: 0 2rem; } header { background: var(--bg-color); box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; } .site-nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; } .site-title { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; } .nav-links { display: flex; gap: 2rem; list-style: none; } .nav-links a { color: var(--text-color); text-decoration: none; transition: color 0.2s; } .nav-links a:hover { color: var(--primary-color); } /* Above-the-fold home page styles */ .banner-container { margin: 2rem auto 3rem; text-align: center; } .ascii-banner { display: inline-block; font-family: 'JetBrains Mono', monospace; font-size: 11px; line-height: 1.2; color: var(--primary-color); } @media (max-width: 768px) { .wrapper { padding: 0 1rem; } .ascii-banner { font-size: 6px; } .nav-links { gap: 1rem; } }</style><link rel="preload" href="/assets/css/main.css?v=2" as="style" onload="this.onload=null;this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="/assets/css/main.css?v=2"></noscript><link rel="alternate" type="application/rss+xml" title="Bazlur&#39;s Blog Archive" href="/feed.xml"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><body><header class="site-header"><div class="header-wrapper"> <a class="site-title" href="/">Bazlur&#39;s Blog Archive</a> <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false"> <span class="hamburger"> <span></span> <span></span> <span></span> </span> </button><nav class="site-nav"> <a class="nav-link" href="/">Home</a> <a class="nav-link" href="/archive">Archive</a> <a class="nav-link" href="/tags">Tags</a> <a class="nav-link" href="/search">Search</a> <a class="nav-link" href="https://bazlur.com/conference/" target="_blank" rel="noopener">Speaking</a> <a class="nav-link" href="/about">About</a> <a class="nav-link nav-link-external" href="https://bazlur.ca" target="_blank" rel="noopener">Original Site →</a></nav></div></header><main class="page-content" aria-label="Content"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><div class="post-hero-image"> <img src="/images/dall-e-2023-10-11-03.34.35-photo-representation-of-a-hello-world-java-program-with-the-main-thread-emphasized-and-other-threads-branching-off-from-it.-background-shows-a-web-s.png" alt="5 Things You Probably Didn’t Know About Java Concurrency" itemprop="image"><div class="hero-overlay"></div></div><div class="post-header with-hero"><div class="wrapper"><h1 class="post-title p-name" itemprop="name headline">5 Things You Probably Didn’t Know About Java Concurrency</h1><p class="post-meta"> <time class="dt-published" datetime="2022-03-24T20:00:00-04:00" itemprop="datePublished"> March 25, 2022 </time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span class="p-author h-card" itemprop="name">A N M Bazlur Rahman</span> </span></p><div class="post-tags-header"> <a href="/tags/java%20concurrency/" class="post-tag-badge">java concurrency</a> <a href="/tags/thread%20ordering/" class="post-tag-badge">thread ordering</a> <a href="/tags/volatile%20keyword/" class="post-tag-badge">volatile keyword</a> <a href="/tags/completablefuture/" class="post-tag-badge">completablefuture</a> <a href="/tags/lock%20free%20programming/" class="post-tag-badge">lock free programming</a></div></div></div><div class="wrapper post-wrapper-with-toc"><div class="post-container"><div class="post-content e-content" itemprop="articleBody"><p><img src="/images/dall-e-2023-10-11-03.34.35-photo-representation-of-a-hello-world-java-program-with-the-main-thread-emphasized-and-other-threads-branching-off-from-it.-background-shows-a-web-s.png" alt="" /></p><h1 id="5-things-you-probably-didnt-know-about-java-concurrency">5 Things You Probably Didn’t Know About Java Concurrency</h1><p>Threads are at the heart of the Java programming language. When we run a “Hello World” Java program, we run on the main thread. From there, we can create threads easily, as we need to compose our application code to be functional, responsive, and performant, all at the same time.</p><p>Think about a web server: it simultaneously handles many thousands of requests at the same time. In Java, we achieve this using multiple threads. While threads are helpful, they are full of dread/thread to many developers.</p><p>That’s why, in this article, I will share five interesting threading concepts that beginner and intermediate developers might not know about, yet.</p><ol><li><h2 id="program-order-and-execution-order-are-not-the-same">Program Order And Execution Order Are Not The Same</h2></ol><p>When we write code, we assume it will be executed exactly the way we write it.</p><p>However, in reality, this is not the case.</p><p>The Java compiler may change the execution order to optimize it, if it can determine that the output won’t change in single-threaded code.</p><p>Look at the following code snippet:</p><pre><code class="language-java">package ca.bazlur.playground;
import java.util.concurrent.Phaser;
public class ExecutionOrderDemo {
    private static class A {
        int x = 0;
    }
    private static final A sharedData1 = new A();
    private static final A sharedData2 = new A();
    public static void main(String[] args) {
        var phaser = new Phaser(3);
        var t1 = new Thread(() -&gt; {
            phaser.arriveAndAwaitAdvance();
            var l1 = sharedData1;
            var l2 = l1.x;
            var l3 = sharedData2;
            var l4 = l3.x;
            var l5 = l1.x;
            System.out.println("Thread 1: " + l2 + "," + l4 + "," + l5);
        });
        var t2 = new Thread(() -&gt; {
            phaser.arriveAndAwaitAdvance();
            var l6 = sharedData1;
            l6.x = 3;
            System.out.println("Thread 2: " + l6.x);
        });
        t1.start();
        t2.start();
        phaser.arriveAndDeregister();
    }
}
</code></pre><p>The above code seems straightforward. We have two shared data (“sharedData1” and “sharedData2”) and two threads use them.</p><p>When we execute the code, we assume the output would be:</p><pre><code class="language-java">Thread 2: 3
Thread 1: 0,0,0
</code></pre><p>But if you run it a few times, you will see different outputs:</p><pre><code class="language-java">Thread 2: 3
Thread 1: 3,0,3

Thread 2: 3
Thread 1: 0,0,3

Thread 2: 3
Thread 1: 3,3,3

Thread 2: 3
Thread 1: 0,3,0

Thread 2: 3
Thread 1: 0,3,3
</code></pre><p>I’m not claiming all of them can be reproducible on your machine, but all of them are possibilities.</p><ol><li><h2 id="java-threads-are-limited">Java Threads Are Limited</h2></ol><p>Creating a thread is easy in Java.</p><p>However, that doesn’t mean we can make as many of them as we want.</p><p>Threads are limited.</p><p>We can easily find out how many threads we can create on a particular machine by running the following:</p><pre><code class="language-java">package ca.bazlur.playground;

import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.locks.LockSupport;

public class Playground {
    public static void main(String[] args) {
        var counter = new AtomicInteger();
        while (true) {
            new Thread(() -&gt; {
                int count = counter.incrementAndGet();
                System.out.println("thread count = " + count);
                LockSupport.park();
            }).start();
        }
    }
}
</code></pre><p>The above is simple.</p><p>It creates a thread in a loop and then parks it, which means the thread is disabled for further use, but it certainly does the system call and allocates memory.</p><p>It keeps creating threads until it cannot create any more, and then throws an exception.</p><p>Here we are interested in the number that we get before the program throws an exception.</p><p>On my machine, I was able to create only 4065 threads.</p><ol><li><h2 id="having-many-threads-doesnt-guarantee-better-performance">Having Many Threads Doesn’t Guarantee Better Performance</h2></ol><p>Sometimes we may naively think that, since we can create threads easily in Java, that that certainly boosts application performance. Unfortunately, this assumption is flawed in the case of our traditional threading model that Java provides today.</p><p>Too many threads may, in fact, hurt application performance.</p><p>Let’s ask this question first: what is the optimal maximum number of threads we can create that maximize performance of an application?</p><p>Well, the answer isn’t straightforward and I wish it was. It very much depends on the type of work we are doing.</p><p>If we have multiple independent tasks and they are all computational and don’t block any external resources, then having many threads will not improve performance much.</p><p>On the other hand, if we have a 8 Crore CPU, the optimal number of threads can be (8 + 1).</p><p>In such case, we may rely on the parallel stream introduced in Java 8. By default, the parallel stream uses the Fork/Join common pool.</p><p>By default, it creates threads equal to the number of available processors, which is sufficient for CPU-intensive work.</p><p>Adding more threads to CPU-intensive work where nothing blocks will not result in better performance.</p><p>Rather, we will waste resources.</p><p>Note that the reason for having an extra one is that even compute-intensive threads occasionally take a page fault or pauses for some other reason, see “<a href="https://www.amazon.ca/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601">Java Concurrency in Practice</a>” by Brian Goetz, page 170.</p><p>However, suppose the tasks are I/O bound, for example. In that case, they depend on external communication (e.g., database or REST API ), making more threads make sense. The reason is that when a thread waits on the REST API, other threads can go on and continue working.</p><p>Now again, we can ask, how many threads is too many threads for such a scenario?</p><p>Well, it depends. There are no ideal numbers that fit all cases. So we have to do adequate testing to find out what is the best for our particular workload and application.</p><p>However, in most typical scenarios, we usually have a mixed set of tasks. And things are completed in such cases.</p><p>In “<a href="https://www.amazon.ca/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601">Java Concurrency in Practice</a>,” Brian Goetz provided a formula that we can use in most cases.</p><pre><code class="language-java">Number of threads = Number of Available Cores * (1 + Wait time / Service time)
</code></pre><p>Waiting time could IO, e.g., waiting for an HTTP response, acquiring Lock, and so on.</p><p>Service Time is the time of computation, e.g., processing the HTTP response, marshalling/unmarshalling, etc.</p><p>For example, an application calls an API and then processes it. If we have 8 processors on the application server, and then on average, the response time of the API is 100ms and the processing time of the response is 20ms, then the ideal size of thread would be:</p><pre><code class="language-java">N = 8 * ( 1 + 100/20)
  = 48
</code></pre><p>However, this is an oversimplification because adequate testing is always critical to figuring out the number.</p><ol><li><h2 id="concurrency-isnt-parallelism">Concurrency Isn’t Parallelism</h2></ol><p>Sometimes the terms concurrency and parallelism interchangeably, which isn’t correct. Although in Java we achieve both using threads, these two are two different things.</p><p>“In programming, concurrency is the composition of independently executing processes, while parallelism is the simultaneous execution of (possibly related) computations. Concurrency is about dealing with lots of things at once. Parallelism is about doing lots of things at once.”</p><p>The above definition is given by Rob Pike is pretty accurate, and see <a href="https://www.youtube.com/watch?v=f6kdp27TYZs">https://www.youtube.com/watch?v=f6kdp27TYZs</a>.</p><p>Suppose we have absolutely independent tasks, and they can be computed separately. In that case, those tasks are said to be parallel and can be run with Fork/Join pool or parallel stream.</p><p>On the other hand, if we have many tasks, some of them may depend on one another. The way we compose and structure them are said to be concurrency. Concurrency is all about structure. We may want to progress multiple tasks simultaneously to achieve a particular result and not necessarily finish one faster.</p><ol><li><h2 id="project-loom-enables-us-to-create-millions-of-threads">Project Loom Enables Us To Create Millions Of Threads</h2></ol><p>In our previous point, I argued that having many threads doesn’t mean performance gain in the application.</p><p>However, in the modern days in the microservices era, we communicate with many services to do a particular piece of work. In these scenarios, threads stay in a blocked state most of the time.</p><p>While modern OS can handle millions of open sockets at times, we cannot open many communication channels since we are limited by the number of threads.</p><p>What if we can create millions of threads and each of them will use an open socket to deal with the external communication?</p><p>That would certainly improve our throughput of an application.</p><p>I have discussed this idea in this article in detail: <a href="https://bazlur.com/2021/06/project-loom-the-light-at-the-end-of-the-tunnel/">https://bazlur.com/2021/06/project-loom-the-light-at-the-end-of-the-tunnel/</a>.</p><p>To continue with this idea, there is an initiative going on in Java called Project Loom. Using Project Loom, we can, in fact, create millions of virtual threads.</p><p>For example, using the following code snippet, I was able to create 4.5 million threads on my machine, but you can do more, based on your own machine.</p><pre><code class="language-java">import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.locks.LockSupport;
public class Main {
    public static void main(String[] args) {
        var counter = new AtomicInteger(); 
        
        // 4_576_279 
        while (true) {
            Thread.startVirtualThread(() -&gt; {
                int count = counter.incrementAndGet();
                System.out.println("thread count = " + count);
                LockSupport.park();
            });
        }
    }
}
</code></pre><p>To run this program, you need to have Java 18, <a href="https://foojay.io/download/">which can be downloaded here</a>.</p><p>You can run using the following command –</p><pre><code class="language-java">java --source 18 --enable-preview Main.java
</code></pre><hr /><p>Type your email… {#subscribe-email}</p></div></div><div class="original-article-notice"><p>✨ This article was originally published at <a href="https://bazlur.ca/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/" target="_blank" rel="noopener">https://bazlur.ca/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/</a></p></div><div class="newsletter-cta"><div class="newsletter-content"><h3>📬 Stay Updated with My Newsletter</h3><p>Want to keep in touch and learn more about:</p><ul><li>☕ Java & all the new features coming along<li>🧵 Concurrency & Virtual Threads<li>🧠 LLMs, LangChain4j & AI Integration<li>🚀 Quarkus, Spring & Jakarta EE</ul><p>Subscribe to my newsletter for regular updates, tips, and insights delivered straight to your inbox!</p><a href="https://bazlur.substack.com/" target="_blank" rel="noopener" class="newsletter-button"> Subscribe Now </a></div></div><div class="social-follow-cta"><h3>🌐 Let's Connect!</h3><p>Follow me on social media for more updates, insights, and discussions:</p><div class="social-links-grid"> <a href="https://www.linkedin.com/in/bazlur/" target="_blank" rel="noopener" class="social-link linkedin"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/> </svg> LinkedIn </a> <a href="https://x.com/bazlur_rahman" target="_blank" rel="noopener" class="social-link twitter"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> X (Twitter) </a> <a href="https://bsky.app/profile/bazlur.ca" target="_blank" rel="noopener" class="social-link bluesky"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 11.388c-.906-1.761-3.372-5.044-5.665-6.662-2.197-1.552-3.48-1.415-4.068-.936-.786.641-.581 2.039-.241 3.121.269.857 1.135 3.24 1.135 3.24s-3.999 1.395-4.077 4.106c-.04 1.4.52 2.416 1.492 3.029 3.174 2.001 5.503-2.192 7.301-3.79a.878.878 0 0 1 1.238 0c1.798 1.598 4.127 5.791 7.301 3.79.972-.613 1.532-1.629 1.492-3.029-.078-2.711-4.077-4.106-4.077-4.106s.866-2.383 1.135-3.24c.34-1.082.545-2.48-.241-3.121-.588-.479-1.871-.616-4.068.936C15.372 6.344 12.906 9.627 12 11.388z"/> </svg> Bluesky </a> <a href="https://github.com/rokon12" target="_blank" rel="noopener" class="social-link github"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/> </svg> GitHub </a> <a href="https://www.infoq.com/profile/A-N-M-Bazlur-Rahman/#allActivity" target="_blank" rel="noopener" class="social-link infoq"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/> </svg> InfoQ </a></div></div><footer class="post-footer"><div class="post-tags-footer"><h4>Topics covered in this article:</h4><div class="post-tags-list"> <a href="/tags/java%20concurrency/" class="post-tag-pill">java concurrency</a> <a href="/tags/thread%20ordering/" class="post-tag-pill">thread ordering</a> <a href="/tags/volatile%20keyword/" class="post-tag-pill">volatile keyword</a> <a href="/tags/completablefuture/" class="post-tag-pill">completablefuture</a> <a href="/tags/lock%20free%20programming/" class="post-tag-pill">lock free programming</a></div></div><div class="post-meta-footer"><p><em>Article archived on August 05, 2025 at 10:25 PM</em></p></div><div class="post-nav"> <a class="prev" href="/2022/03/15/7-reasons-why-after-26-years-java-still-makes-sense/"> <span style="font-size: 0.9rem; color: #6b7280;">← Previous</span><br> <strong>7 Reasons Why, After 26 Years, Java Still Makes...</strong> </a> <a class="next" href="/2022/04/06/three-mistakes-junior-software-developers-make-preventing-getting-hired-on-amazing-projects/"> <span style="font-size: 0.9rem; color: #6b7280;">Next →</span><br> <strong>Three Mistakes Junior Software Developers Make ...</strong> </a></div></footer><div class="share-buttons"><h3 class="share-title">Share this article</h3><div class="share-buttons-grid"> <button class="share-button share-twitter" onclick="shareOnTwitter('5 Things You Probably Didn’t Know About Java Concurrency', 'http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/')" aria-label="Share on Twitter"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> <span>Twitter</span> </button> <button class="share-button share-linkedin" onclick="shareOnLinkedIn('5 Things You Probably Didn’t Know About Java Concurrency', 'http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/')" aria-label="Share on LinkedIn"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/> </svg> <span>LinkedIn</span> </button> <button class="share-button share-copy" onclick="copyToClipboard('http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/')" aria-label="Copy link"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> <span>Copy Link</span> </button> <button class="share-button share-email" onclick="shareViaEmail('5 Things You Probably Didn’t Know About Java Concurrency', 'http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/')" aria-label="Share via email"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline> </svg> <span>Email</span> </button> <button class="share-button share-reddit" onclick="shareOnReddit('5 Things You Probably Didn’t Know About Java Concurrency', 'http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/')" aria-label="Share on Reddit"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/> </svg> <span>Reddit</span> </button> <button class="share-button share-hackernews" onclick="shareOnHackerNews('5 Things You Probably Didn’t Know About Java Concurrency', 'http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/')" aria-label="Share on Hacker News"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M0 0v24h24V0H0zm12.8 17.7h-1.6v-5.5L8.4 6.3H10l1.8 4.1.2.5.2-.5 1.8-4.1h1.6l-2.8 5.9v5.5z"/> </svg> <span>HN</span> </button></div><button class="share-button share-native" onclick="nativeShare('5 Things You Probably Didn’t Know About Java Concurrency', ' ', 'http://localhost:4001/2022/03/25/5-things-you-probably-didnt-know-about-java-concurrency/')" aria-label="Share"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"> <circle cx="18" cy="5" r="3"></circle> <circle cx="6" cy="12" r="3"></circle> <circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line> </svg> <span>Share</span> </button></div><div class="share-toast" id="share-toast"> <span class="share-toast-message"></span></div><script> // Share on Twitter/X function shareOnTwitter(title, url) { const text = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://twitter.com/intent/tweet?text=${text}&url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('twitter'); } // Share on LinkedIn function shareOnLinkedIn(title, url) { const shareUrl = encodeURIComponent(url); window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('linkedin'); } // Share on Reddit function shareOnReddit(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://www.reddit.com/submit?title=${shareTitle}&url=${shareUrl}`, '_blank', 'width=850,height=550'); trackShare('reddit'); } // Share on HackerNews function shareOnHackerNews(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://news.ycombinator.com/submitlink?t=${shareTitle}&u=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('hackernews'); } // Share via Email function shareViaEmail(title, url) { const subject = encodeURIComponent(`Check out: ${title}`); const body = encodeURIComponent(`I thought you might find this interesting:\n\n${title}\n${url}\n\nFrom Bazlur's Archive`); window.location.href = `mailto:?subject=${subject}&body=${body}`; trackShare('email'); } // Copy to clipboard function copyToClipboard(url) { // Create temporary input element const temp = document.createElement('input'); temp.value = url; document.body.appendChild(temp); temp.select(); try { // Try modern API first if (navigator.clipboard) { navigator.clipboard.writeText(url).then(() => { showToast('Link copied to clipboard!'); animateCopyButton(); }); } else { // Fallback for older browsers document.execCommand('copy'); showToast('Link copied to clipboard!'); animateCopyButton(); } } catch (err) { showToast('Failed to copy link'); } document.body.removeChild(temp); trackShare('copy'); } // Native share API (mobile) function nativeShare(title, text, url) { if (navigator.share) { navigator.share({ title: title, text: text, url: url }).then(() => { trackShare('native'); }).catch((error) => { if (error.name !== 'AbortError') { console.log('Error sharing:', error); } }); } else { // Fallback to copy link copyToClipboard(url); } } // Show toast notification function showToast(message) { const toast = document.getElementById('share-toast'); const toastMessage = toast.querySelector('.share-toast-message'); toastMessage.textContent = message; toast.classList.add('show'); setTimeout(() => { toast.classList.remove('show'); }, 3000); } // Animate copy button function animateCopyButton() { const copyButton = document.querySelector('.share-copy'); copyButton.classList.add('copied'); // Change icon temporarily const span = copyButton.querySelector('span'); const originalText = span.textContent; span.textContent = 'Copied!'; setTimeout(() => { copyButton.classList.remove('copied'); span.textContent = originalText; }, 2000); } // Track share events (for analytics if needed) function trackShare(platform) { console.log(`Shared on ${platform}`); // You can add analytics tracking here } // Show native share button only if supported document.addEventListener('DOMContentLoaded', function() { const nativeButton = document.querySelector('.share-native'); if (!navigator.share) { nativeButton.style.display = 'none'; } else { // Hide native button on desktop if (window.innerWidth > 768) { nativeButton.style.display = 'none'; } } }); </script><style> .share-buttons { margin: 40px 0; padding: 30px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05)); border: 1px solid rgba(102, 126, 234, 0.2); border-radius: 16px; } .share-title { font-size: 18px; margin-bottom: 20px; color: #667eea; font-family: 'JetBrains Mono', monospace; text-align: center; } .share-buttons-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; max-width: 600px; margin: 0 auto; } .share-button { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 16px; background: #1a1a2e; border: 2px solid #313244; border-radius: 12px; color: #ccc; font-size: 14px; font-family: 'JetBrains Mono', monospace; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; } .share-button::before { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; background: rgba(102, 126, 234, 0.3); transform: translate(-50%, -50%); transition: width 0.6s, height 0.6s; } .share-button:hover::before { width: 300px; height: 300px; } .share-button:hover { transform: translateY(-2px); border-color: #667eea; color: #fff; box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2); } .share-button svg { position: relative; z-index: 1; } .share-button span { position: relative; z-index: 1; } /* Platform-specific colors on hover */ .share-twitter:hover { border-color: #1DA1F2; color: #1DA1F2; } .share-linkedin:hover { border-color: #0077B5; color: #0077B5; } .share-reddit:hover { border-color: #FF4500; color: #FF4500; } .share-hackernews:hover { border-color: #FF6600; color: #FF6600; } .share-email:hover { border-color: #764ba2; color: #764ba2; } .share-copy:hover, .share-copy.copied { border-color: #10b981; color: #10b981; } .share-copy.copied { animation: successPulse 0.5s ease; } @keyframes successPulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } } /* Native share button (mobile) */ .share-native { display: none; width: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border: none; color: white; font-weight: 600; margin-top: 12px; } .share-native:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3); } /* Toast notification */ .share-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); z-index: 10000; opacity: 0; transition: all 0.3s ease; font-family: 'JetBrains Mono', monospace; } .share-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); } /* Mobile responsive */ @media (max-width: 768px) { .share-buttons-grid { grid-template-columns: repeat(3, 1fr); } .share-native { display: flex; } .share-button span { display: none; } .share-button { padding: 12px; } } /* Dark theme adjustments */ [data-theme="dracula"] .share-button, [data-theme="nord"] .share-button, [data-theme="monokai"] .share-button { background: var(--bg-secondary); border-color: var(--accent); } /* Print styles */ @media print { .share-buttons { display: none; } }</style><div class="related-posts-section"><h2 class="related-posts-header"> <span class="gradient-text">Related Articles</span></h2><p class="no-related-posts">No related articles found. Check back later for more content!</p></div></div></article></main><footer class="site-footer"><div class="footer-content"><p>A comprehensive archive of articles on Java, Software Development, and Technology</p><p>© 2025 A N M Bazlur Rahman. All articles are archived from <a href="https://bazlur.ca">bazlur.ca</a></p><p> <a href="/feed.xml">RSS Feed</a> • <a href="https://twitter.com/bazlur_rahman">Twitter</a> • <a href="https://github.com/rokon12">GitHub</a></p></div></footer><script> // Fade-in animations on scroll document.addEventListener('DOMContentLoaded', function() { const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -100px 0px' }; const observer = new IntersectionObserver(function(entries) { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } }); }, observerOptions); // Observe fade-in elements document.querySelectorAll('.fade-in, .fade-in-up, .fade-in-left, .fade-in-right, .stagger-animation').forEach(el => { observer.observe(el); }); // Add fade-in classes to post cards document.querySelectorAll('.post-card').forEach((card, index) => { card.classList.add('fade-in-up'); card.style.transitionDelay = `${index * 0.1}s`; }); // Removed duplicate image observer - handled by image-optimization.js }); </script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" data-manual></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script> <script defer src="/assets/js/prism-setup.js"></script> <script defer src="/assets/js/terminal.js"></script> <script defer src="/assets/js/image-optimization.js"></script> <script> if ('loading' in HTMLImageElement.prototype) { const images = document.querySelectorAll('img[loading="lazy"]'); images.forEach(img => { img.src = img.dataset.src || img.src; }); } else { // Fallback for browsers that don't support lazy loading const script = document.createElement('script'); script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js'; document.body.appendChild(script); } </script><div class="reading-progress" id="reading-progress"></div><script> document.addEventListener('scroll', function() { const winScroll = document.body.scrollTop || document.documentElement.scrollTop; const height = document.documentElement.scrollHeight - document.documentElement.clientHeight; const scrolled = (winScroll / height) * 100; document.getElementById("reading-progress").style.width = scrolled + "%"; }); </script> <script> document.addEventListener('DOMContentLoaded', function() { // Mobile menu toggle const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const siteNav = document.querySelector('.site-nav'); if (mobileMenuToggle) { mobileMenuToggle.addEventListener('click', function() { const isExpanded = this.getAttribute('aria-expanded') === 'true'; this.setAttribute('aria-expanded', !isExpanded); siteNav.classList.toggle('is-active'); document.body.classList.toggle('menu-open'); }); // Close menu when clicking outside document.addEventListener('click', function(e) { if (!e.target.closest('.site-header') && siteNav.classList.contains('is-active')) { mobileMenuToggle.setAttribute('aria-expanded', 'false'); siteNav.classList.remove('is-active'); document.body.classList.remove('menu-open'); } }); } // Initialize theme const savedTheme = localStorage.getItem('theme') || 'dark'; document.documentElement.setAttribute('data-theme', savedTheme); // Global search shortcut document.addEventListener('keydown', function(e) { // Focus search with / if (e.key === '/' && !e.metaKey && !e.ctrlKey) { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement !== searchInput) { e.preventDefault(); searchInput.focus(); document.body.classList.add('search-focused'); } } // Clear focus on ESC if (e.key === 'Escape') { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement === searchInput) { searchInput.blur(); searchInput.value = ''; document.body.classList.remove('search-focused'); } } }); }); </script> <button class="back-to-top" id="back-to-top" aria-label="Back to top"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline> </svg> </button> <script> document.addEventListener('DOMContentLoaded', function() { const backToTopButton = document.getElementById('back-to-top'); // Show/hide button based on scroll position function toggleBackToTop() { if (window.scrollY > 300) { backToTopButton.classList.add('visible'); } else { backToTopButton.classList.remove('visible'); } } // Throttle scroll events let isScrolling = false; window.addEventListener('scroll', function() { if (!isScrolling) { window.requestAnimationFrame(function() { toggleBackToTop(); isScrolling = false; }); isScrolling = true; } }); // Smooth scroll to top backToTopButton.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); }); // Initial check toggleBackToTop(); }); </script> <script> if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { console.log('ServiceWorker registration successful'); }, function(err) { console.log('ServiceWorker registration failed: ', err); }); }); } </script>