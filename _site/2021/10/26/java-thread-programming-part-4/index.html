<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="https://bazlur.ca/2021/10/26/java-thread-programming-part-4/"><title>Java Thread Programming (Part 4) | Bazlur‚Äôs Blog Archive</title><meta name="generator" content="Jekyll v3.9.5" /><meta property="og:title" content="Java Thread Programming (Part 4)" /><meta name="author" content="A N M Bazlur Rahman" /><meta property="og:locale" content="en_US" /><meta name="description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><meta property="og:description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><link rel="canonical" href="http://localhost:4000/2021/10/26/java-thread-programming-part-4/" /><meta property="og:url" content="http://localhost:4000/2021/10/26/java-thread-programming-part-4/" /><meta property="og:site_name" content="Bazlur‚Äôs Blog Archive" /><meta property="og:image" content="http://localhost:4000/assets/img/default-og.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-26T00:00:00-04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="http://localhost:4000/assets/img/default-og.jpg" /><meta property="twitter:title" content="Java Thread Programming (Part 4)" /><meta name="twitter:site" content="@bazlur_rahman" /><meta name="twitter:creator" content="@A N M Bazlur Rahman" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"A N M Bazlur Rahman"},"dateModified":"2021-10-26T00:00:00-04:00","datePublished":"2021-10-26T00:00:00-04:00","description":"A comprehensive archive of articles on Java, Software Development, and Technology","headline":"Java Thread Programming (Part 4)","image":"http://localhost:4000/assets/img/default-og.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/10/26/java-thread-programming-part-4/"},"url":"http://localhost:4000/2021/10/26/java-thread-programming-part-4/"}</script><style> /* Critical CSS - Inline for faster initial render */ :root { --primary-color: #2563eb; --secondary-color: #7c3aed; --text-color: #1f2937; --text-light: #6b7280; --bg-color: #ffffff; --bg-gray: #f9fafb; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; line-height: 1.6; color: var(--text-color); background: var(--bg-gray); } .wrapper { max-width: 1200px; margin: 0 auto; padding: 0 2rem; } header { background: var(--bg-color); box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; } .site-nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; } .site-title { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; } .nav-links { display: flex; gap: 2rem; list-style: none; } .nav-links a { color: var(--text-color); text-decoration: none; transition: color 0.2s; } .nav-links a:hover { color: var(--primary-color); } /* Above-the-fold home page styles */ .banner-container { margin: 2rem auto 3rem; text-align: center; } .ascii-banner { display: inline-block; font-family: 'JetBrains Mono', monospace; font-size: 11px; line-height: 1.2; color: var(--primary-color); } @media (max-width: 768px) { .wrapper { padding: 0 1rem; } .ascii-banner { font-size: 6px; } .nav-links { gap: 1rem; } }</style><link rel="preload" href="/assets/css/main.css?v=2" as="style" onload="this.onload=null;this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="/assets/css/main.css?v=2"></noscript><link rel="alternate" type="application/rss+xml" title="Bazlur&#39;s Blog Archive" href="/feed.xml"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" media="print" onload="this.media='all'" /><body><header class="site-header"><div class="header-wrapper"> <a class="site-title" href="/">Bazlur&#39;s Blog Archive</a> <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false"> <span class="hamburger"> <span></span> <span></span> <span></span> </span> </button><nav class="site-nav"> <a class="nav-link" href="/">Home</a> <a class="nav-link" href="/archive">Archive</a> <a class="nav-link" href="/tags">Tags</a> <a class="nav-link" href="/search">Search</a> <a class="nav-link" href="https://bazlur.com/conference/" target="_blank" rel="noopener">Speaking</a> <a class="nav-link" href="/about">About</a> <a class="nav-link nav-link-external" href="https://bazlur.ca" target="_blank" rel="noopener">Original Site ‚Üí</a></nav></div></header><main class="page-content" aria-label="Content"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><div class="post-hero-image"> <img src="/images/dall-e-2023-10-11-03.28.56-graphical-representation-of-a-computers-cpu-and-memory.-threads-labeled-thread-1-and-thread-2-move-from-the-cpu-towards-the-memory-and-back-sh.png" alt="Java Thread Programming (Part 4)" itemprop="image"><div class="hero-overlay"></div></div><div class="post-header with-hero"><div class="wrapper"><h1 class="post-title p-name" itemprop="name headline">Java Thread Programming (Part 4)</h1><p class="post-meta"> <time class="dt-published" datetime="2021-10-25T20:00:00-04:00" itemprop="datePublished"> October 26, 2021 </time> ‚Ä¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span class="p-author h-card" itemprop="name">A N M Bazlur Rahman</span> </span></p><div class="post-tags-header"> <a href="/tags/java%20threads/" class="post-tag-badge">java threads</a> <a href="/tags/volatile%20keyword/" class="post-tag-badge">volatile keyword</a> <a href="/tags/thread%20safety/" class="post-tag-badge">thread safety</a> <a href="/tags/memory%20visibility/" class="post-tag-badge">memory visibility</a> <a href="/tags/data%20race/" class="post-tag-badge">data race</a></div></div></div><div class="wrapper post-wrapper-with-toc"><div class="post-container"><div class="post-content e-content" itemprop="articleBody"><p><img src="/images/dall-e-2023-10-11-03.28.56-graphical-representation-of-a-computers-cpu-and-memory.-threads-labeled-thread-1-and-thread-2-move-from-the-cpu-towards-the-memory-and-back-sh.png" alt="" /></p><h1 id="java-thread-programming-part-4">Java Thread Programming (Part 4)</h1><p>In <a href="https://foojay.io/today/java-thread-programming-part-3/">the previous article</a>, we discussed the visibility problem while working with multiple threads.</p><p>We will discuss another similar situation in this article. However, we will use symbols and pseudocode to explain this.</p><h2 id="symbols">Symbols</h2><p>Let‚Äôs define the symbols first.</p><ul><li><code>L</code> ‚Äì Local variable, e.g., <code>L1</code>, <code>L2</code>, etc.<li><code>S</code> ‚Äì Shared variable, e.g., <code>S1</code>, <code>S2</code>, etc. These variables are visible among multiple threads. They can be static as well.</ul><p><code>S.X</code> ‚Äì here <code>X</code> is a field of an object where <code>S</code> is the reference of that Object, e.g., <code>S1.X</code>.</p><p>In pseudocode, we will use thread number and line number as well. For example, <code>1.1</code>, here, <code>1</code> is the thread id, and the number after the dot is the line number.</p><p><code>1.2</code> ‚Äì thread <code>1</code>, line number <code>2</code>.</p><p>The local variables will have defaults unless they are initialized with a value. For example, for <code>Boolean</code>, the default value is <code>false</code>; for <code>integer</code>, the default value is <code>0</code>.</p><h2 id="pseudocode">Pseudocode</h2><p>If we turn the program that we discussed <a href="https://foojay.io/?p=50525&amp;preview_id=50525&amp;preview_nonce=2c6db1d17c&amp;preview=true">in the last article</a> into symbols and pseudocode, we have the following:</p><table><thead><tr><th>Thread 1<th>Thread 2<tbody><tr><td>1.1 WHILE (!S1){}<td>2.1 S1= TRUE<tr><td>1.2 PRINT ‚ÄúFoojay.io‚Äù<td>2.2 PRINT ‚ÄúI love ‚Äú</table><p>Since we already discussed the above problem in our previous article, the execution order would be:</p><pre><code class="language-java">Execution order 1 # 1.1, 2.1, 1.2, 2.2
Execution order 2 # 1.1, 2.1, 2.2, 1.2
Execution order 3 # 1.1, 2.1, 2.2
</code></pre><p>Now that we are familiar with the symbol and pseudocode let‚Äôs see another problem:</p><table><thead><tr><th>Thread 1<th>Thread 2<tbody><tr><td>1.1 L1 = S1<td>2.1 L2 = S2<tr><td>1.2 S2 = 2<td>2.2 S1 = 1<tr><td>1.3 PRINT ‚ÄúThread1: ‚Äú + L1<td>2.3 PRINT ‚ÄúThread2: ‚Äú+ L2</table><p>What can be the possible output of this program?</p><p>The possible execution order could be:</p><pre><code class="language-java">Execution order 1 # 1.1, 1.2. 1.3, 2.1, 2.2, 2.3 
Execution order 2 # 2.1, 2.2, 2.3, 1.1, 1.2. 1.3
</code></pre><p>If the first execution order succeeds, then the output would be:</p><pre><code class="language-java">Thread1: 0
Thread2: 2
</code></pre><p>And if the second execution order succeeds, then the output would be:</p><pre><code class="language-java">Thread1: 1
Thread2: 0
</code></pre><p>However, apart from the above two, there is another possible execution order:</p><pre><code class="language-java">Execution order 3:  1.1, 2.1, 1.2, 2.2, 1.3, 2.3
</code></pre><p>If the above execution order succeeds, then the output would be:</p><pre><code class="language-java">Thread1: 0
Thread2: 0
</code></pre><p>The above output doesn‚Äôt depend on the last two executions, <code>1.3</code>. or <code>2.3</code>.</p><p>So the output will remain the same if though <code>2.3</code> executes first.</p><h2 id="execution-order-optimization">Execution Order Optimization</h2><p>So far, we have have three execution orders, and it seems only the three outputs mentioned above are possible.</p><p>However, in reality, we can have the following output as well:</p><pre><code class="language-java">Thread1: 1
Thread2: 1
</code></pre><p>‚Ä¶or‚Ä¶</p><pre><code class="language-java">Thread1: 2
Thread2: 2
</code></pre><p>These outputs may not seem logical, however, they are possible. And the execution order could be:</p><pre><code class="language-java">Execution order 4: 2.1, 1.1, 1.2, 2.1, 1.3, 2.3
</code></pre><p>‚Ä¶or‚Ä¶</p><pre><code class="language-java">Execution order 5: 1.2, 2.1,2.2, 1.1, 1.3, 2.3
</code></pre><p>Now the question is how this is even possible?</p><p>The answer is that we write our code in a particular order; however, when executing it, it doesn‚Äôt mean the Java compiler and virtual machine maintain that order. The <strong>Java compiler may change the execution order to optimize it if it can determine that the output won‚Äôt change in single-threaded code</strong> . For example, just look at the order of the code in the first thread. If we interchange the execution order, <code>1.1</code> and <code>1.2</code>, the output won‚Äôt change in that thread.</p><p>These sorts of changes happen for various reasons. For example, the intelligent algorithm of the Java compiler may find a way to optimize particular code to run faster. The bottom line is, the program order and execution order may vary. It doesn‚Äôt always match. And the execution order also depends on the computer, hardware architecture, etc. So this is a possible source of having a programming bug. This sort of bug may not be easily detectable in a development environment but can very likely appear in a production environment. However, when you go to find it, it may disappear. This sort of bug has a unique name; they are called <a href="https://en.wikipedia.org/wiki/Heisenbug">Heisenbugs</a>.</p><p>Let‚Äôs look at another example:</p><table><thead><tr><th>Thread 1<th>Thread 2<tbody><tr><td>1.1 L1 = S1<td>2.1 L6 = S1<tr><td>1.2 L2 = L1.X<td>2.2 L6.X = 3<tr><td>1.3 L3 = S2<td>2.3 PRINT ‚ÄúThread2: ‚Äú + L6.X<tr><td>1.4 L4 = L3.X<td>¬†<tr><td>1.5 L5 = L1.X<td>¬†<tr><td>1.6 PRINT ‚ÄúThread1: ‚Äú + L2, L4, L5<td>¬†</table><p>In this program, we have used an object which has a field <code>X</code>.</p><p>Here, <code>S1</code> and <code>S2</code> are the references of the same Object.</p><p>If the second thread runs first, what would be the output of thread 2?</p><pre><code class="language-java">Thread2: 3
</code></pre><p>The reason is, in <code>2.3</code> we have set <code>L6.X = 3</code>. However, if execution order is different than the program order, the output would be different. That‚Äôs why here the Java compiler won‚Äôt change it.</p><p>Now let‚Äôs look at the first thread. What would be the output?</p><pre><code class="language-java">Thread1: 000
</code></pre><p>In this case, <code>1.2</code>, <code>1.4</code>, and <code>1.5</code> must have run before <code>2.2</code>. if <code>2.2</code> executes first, then the output would be:</p><pre><code class="language-java">Thread1: 333
</code></pre><p>If <code>1.2</code> execute before <code>2.2</code> and then <code>1.4</code> and 1.5 execute, the output would be:</p><pre><code class="language-java">Thread1: 033
</code></pre><p>If <code>1.2</code> and <code>1.4</code> executes before <code>2.2</code> and then <code>1.5</code> executes, the output would be:</p><pre><code class="language-java">Thread1: 003
</code></pre><p>Now, look at the following output:</p><pre><code class="language-java">Thread1: 030
</code></pre><p>Do you think the above output is possible? The reason is if <code>1.2</code> executes first and then <code>2.2</code> executes, and then it doesn‚Äôt matter whatever the execution order for the rest of the exception, the output should be:</p><pre><code class="language-java">Thread1: 033
</code></pre><p>And we know <code>S1</code> and <code>S2</code> refer to the same Object.</p><p>This is only possible if the compiler changes the program order while compiling.</p><p>Note that, line <code>1.2</code> and <code>1.5</code> assign the same value. And <code>L2</code> and <code>L5</code> are just used to print the value.</p><p>To optimize the above code, the compiler can remove the <code>L5</code> altogether. Instead of <code>L5</code>, it can use<code>L2</code>. In a single-threaded environment, this change won‚Äôt reflect the output. In our code, although we have used <code>L2</code>, <code>L4</code>, and <code>L5</code> to print the value, the compiler can print <code>L2</code>, <code>L4</code>, and <code>L2</code> again.</p><p>In such a case, if <code>1.2</code> executes first and then <code>2.2</code>, since the compiler removed <code>L5</code>, instead of in the print statement, it will print the value of <code>L2</code> in place of <code>L5</code>, which was assigned in line <code>1.2</code>.</p><p>The above example can be found in <a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html">the Java language specification</a>.</p><p>From the above discussion, we have understood that the execution order can be different to the program order. The execution order depends on the compiler‚Äôs optimization technique; it can further rely on the Java virtual machine and the CPU itself. Thus the output of a program becomes uncertain. In a multithread environment, we call this a <strong>data race</strong>.</p><h2 id="benefits-and-drawbacks-of-volatility">Benefits and Drawbacks of Volatility</h2><p>Now the question is, what can be the solution to this problem. Well, the solution is relatively straightforward: <a href="https://foojay.io/today/java-thread-programming-part-3/">we simply use the keyword ‚Äúvolatile‚Äù</a>.</p><p>This keyword can only be used in the field of an Object, not in a local variable. This is because we don‚Äôt share local variables. Also, if a field is final, we don‚Äôt need to use volatile in it. This is because the final fields never get to change, and thus, they don‚Äôt create any problems either.</p><p>We have to keep in mind that if a reference to an Object is used as a field and we then make it volatile, that doesn‚Äôt mean the content of the Object is also volatile. The reference is the only thing that is volatile in this case.</p><p>The benefits of using the volatile keyword are:</p><ul><li>The thread always reads from the main memory. The CPU will never cache the value in its cache. So the visibility problem will disappear.<li>Besides that, if we use volatile on a variable, the compiler is instructed that this value can be changed any time and shared among multiple threads, so therefore it is instructed not to optimize it. The compiler adds a kind of memory fence or barrier that instructs the CPU not to optimize. And this prevents the data race issue.</ul><p>Although the volatile keyword may be a solution, using it too much may cause problems. Since it prevents the CPU from caching data, that certainly reduces the performance of a program a bit. Besides, it prevents further optimization.</p><p>Therefore, we need to be very careful when using the ‚Äúvolatile‚Äù keyword, and we should use it only where it‚Äôs required, and definitely not everywhere.</p><p>That‚Äôs all for today!</p><hr /></div></div><div class="original-article-notice"><p>‚ú® This article was originally published at <a href="https://bazlur.ca/2021/10/26/java-thread-programming-part-4/" target="_blank" rel="noopener">https://bazlur.ca/2021/10/26/java-thread-programming-part-4/</a></p></div><div class="newsletter-cta"><div class="newsletter-content"><h3>üì¨ Stay Updated with My Newsletter</h3><p>Want to keep in touch and learn more about:</p><ul><li>‚òï Java & all the new features coming along<li>üßµ Concurrency & Virtual Threads<li>üß† LLMs, LangChain4j & AI Integration<li>üöÄ Quarkus, Spring & Jakarta EE</ul><p>Subscribe to my newsletter for regular updates, tips, and insights delivered straight to your inbox!</p><a href="https://bazlur.substack.com/" target="_blank" rel="noopener" class="newsletter-button"> Subscribe Now </a></div></div><div class="social-follow-cta"><h3>üåê Let's Connect!</h3><p>Follow me on social media for more updates, insights, and discussions:</p><div class="social-links-grid"> <a href="https://www.linkedin.com/in/bazlur/" target="_blank" rel="noopener" class="social-link linkedin"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/> </svg> LinkedIn </a> <a href="https://x.com/bazlur_rahman" target="_blank" rel="noopener" class="social-link twitter"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> X (Twitter) </a> <a href="https://bsky.app/profile/bazlur.ca" target="_blank" rel="noopener" class="social-link bluesky"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 11.388c-.906-1.761-3.372-5.044-5.665-6.662-2.197-1.552-3.48-1.415-4.068-.936-.786.641-.581 2.039-.241 3.121.269.857 1.135 3.24 1.135 3.24s-3.999 1.395-4.077 4.106c-.04 1.4.52 2.416 1.492 3.029 3.174 2.001 5.503-2.192 7.301-3.79a.878.878 0 0 1 1.238 0c1.798 1.598 4.127 5.791 7.301 3.79.972-.613 1.532-1.629 1.492-3.029-.078-2.711-4.077-4.106-4.077-4.106s.866-2.383 1.135-3.24c.34-1.082.545-2.48-.241-3.121-.588-.479-1.871-.616-4.068.936C15.372 6.344 12.906 9.627 12 11.388z"/> </svg> Bluesky </a> <a href="https://github.com/rokon12" target="_blank" rel="noopener" class="social-link github"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/> </svg> GitHub </a> <a href="https://www.infoq.com/profile/A-N-M-Bazlur-Rahman/#allActivity" target="_blank" rel="noopener" class="social-link infoq"> <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/> </svg> InfoQ </a></div></div><footer class="post-footer"><div class="post-tags-footer"><h4>Topics covered in this article:</h4><div class="post-tags-list"> <a href="/tags/java%20threads/" class="post-tag-pill">java threads</a> <a href="/tags/volatile%20keyword/" class="post-tag-pill">volatile keyword</a> <a href="/tags/thread%20safety/" class="post-tag-pill">thread safety</a> <a href="/tags/memory%20visibility/" class="post-tag-pill">memory visibility</a> <a href="/tags/data%20race/" class="post-tag-pill">data race</a></div></div><div class="post-meta-footer"><p><em>Article archived on August 05, 2025 at 10:26 PM</em></p></div><div class="post-nav"> <a class="prev" href="/2021/10/21/java-thread-programming-part-3/"> <span style="font-size: 0.9rem; color: #6b7280;">‚Üê Previous</span><br> <strong>Java Thread Programming (Part 3)</strong> </a> <a class="next" href="/2021/11/02/java-thread-programming-part-5/"> <span style="font-size: 0.9rem; color: #6b7280;">Next ‚Üí</span><br> <strong>Java Thread Programming (Part 5)</strong> </a></div></footer><div class="share-buttons"><h3 class="share-title">Share this article</h3><div class="share-buttons-grid"> <button class="share-button share-twitter" onclick="shareOnTwitter('Java Thread Programming (Part 4)', 'http://localhost:4000/2021/10/26/java-thread-programming-part-4/')" aria-label="Share on Twitter"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/> </svg> <span>Twitter</span> </button> <button class="share-button share-linkedin" onclick="shareOnLinkedIn('Java Thread Programming (Part 4)', 'http://localhost:4000/2021/10/26/java-thread-programming-part-4/')" aria-label="Share on LinkedIn"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/> </svg> <span>LinkedIn</span> </button> <button class="share-button share-copy" onclick="copyToClipboard('http://localhost:4000/2021/10/26/java-thread-programming-part-4/')" aria-label="Copy link"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> <span>Copy Link</span> </button> <button class="share-button share-email" onclick="shareViaEmail('Java Thread Programming (Part 4)', 'http://localhost:4000/2021/10/26/java-thread-programming-part-4/')" aria-label="Share via email"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline> </svg> <span>Email</span> </button> <button class="share-button share-reddit" onclick="shareOnReddit('Java Thread Programming (Part 4)', 'http://localhost:4000/2021/10/26/java-thread-programming-part-4/')" aria-label="Share on Reddit"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/> </svg> <span>Reddit</span> </button> <button class="share-button share-hackernews" onclick="shareOnHackerNews('Java Thread Programming (Part 4)', 'http://localhost:4000/2021/10/26/java-thread-programming-part-4/')" aria-label="Share on Hacker News"> <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M0 0v24h24V0H0zm12.8 17.7h-1.6v-5.5L8.4 6.3H10l1.8 4.1.2.5.2-.5 1.8-4.1h1.6l-2.8 5.9v5.5z"/> </svg> <span>HN</span> </button></div><button class="share-button share-native" onclick="nativeShare('Java Thread Programming (Part 4)', ' ', 'http://localhost:4000/2021/10/26/java-thread-programming-part-4/')" aria-label="Share"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"> <circle cx="18" cy="5" r="3"></circle> <circle cx="6" cy="12" r="3"></circle> <circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line> </svg> <span>Share</span> </button></div><div class="share-toast" id="share-toast"> <span class="share-toast-message"></span></div><script> // Share on Twitter/X function shareOnTwitter(title, url) { const text = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://twitter.com/intent/tweet?text=${text}&url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('twitter'); } // Share on LinkedIn function shareOnLinkedIn(title, url) { const shareUrl = encodeURIComponent(url); window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('linkedin'); } // Share on Reddit function shareOnReddit(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://www.reddit.com/submit?title=${shareTitle}&url=${shareUrl}`, '_blank', 'width=850,height=550'); trackShare('reddit'); } // Share on HackerNews function shareOnHackerNews(title, url) { const shareTitle = encodeURIComponent(title); const shareUrl = encodeURIComponent(url); window.open(`https://news.ycombinator.com/submitlink?t=${shareTitle}&u=${shareUrl}`, '_blank', 'width=550,height=450'); trackShare('hackernews'); } // Share via Email function shareViaEmail(title, url) { const subject = encodeURIComponent(`Check out: ${title}`); const body = encodeURIComponent(`I thought you might find this interesting:\n\n${title}\n${url}\n\nFrom Bazlur's Archive`); window.location.href = `mailto:?subject=${subject}&body=${body}`; trackShare('email'); } // Copy to clipboard function copyToClipboard(url) { // Create temporary input element const temp = document.createElement('input'); temp.value = url; document.body.appendChild(temp); temp.select(); try { // Try modern API first if (navigator.clipboard) { navigator.clipboard.writeText(url).then(() => { showToast('Link copied to clipboard!'); animateCopyButton(); }); } else { // Fallback for older browsers document.execCommand('copy'); showToast('Link copied to clipboard!'); animateCopyButton(); } } catch (err) { showToast('Failed to copy link'); } document.body.removeChild(temp); trackShare('copy'); } // Native share API (mobile) function nativeShare(title, text, url) { if (navigator.share) { navigator.share({ title: title, text: text, url: url }).then(() => { trackShare('native'); }).catch((error) => { if (error.name !== 'AbortError') { console.log('Error sharing:', error); } }); } else { // Fallback to copy link copyToClipboard(url); } } // Show toast notification function showToast(message) { const toast = document.getElementById('share-toast'); const toastMessage = toast.querySelector('.share-toast-message'); toastMessage.textContent = message; toast.classList.add('show'); setTimeout(() => { toast.classList.remove('show'); }, 3000); } // Animate copy button function animateCopyButton() { const copyButton = document.querySelector('.share-copy'); copyButton.classList.add('copied'); // Change icon temporarily const span = copyButton.querySelector('span'); const originalText = span.textContent; span.textContent = 'Copied!'; setTimeout(() => { copyButton.classList.remove('copied'); span.textContent = originalText; }, 2000); } // Track share events (for analytics if needed) function trackShare(platform) { console.log(`Shared on ${platform}`); // You can add analytics tracking here } // Show native share button only if supported document.addEventListener('DOMContentLoaded', function() { const nativeButton = document.querySelector('.share-native'); if (!navigator.share) { nativeButton.style.display = 'none'; } else { // Hide native button on desktop if (window.innerWidth > 768) { nativeButton.style.display = 'none'; } } }); </script><style> .share-buttons { margin: 40px 0; padding: 30px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05)); border: 1px solid rgba(102, 126, 234, 0.2); border-radius: 16px; } .share-title { font-size: 18px; margin-bottom: 20px; color: #667eea; font-family: 'JetBrains Mono', monospace; text-align: center; } .share-buttons-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; max-width: 600px; margin: 0 auto; } .share-button { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 16px; background: #1a1a2e; border: 2px solid #313244; border-radius: 12px; color: #ccc; font-size: 14px; font-family: 'JetBrains Mono', monospace; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; } .share-button::before { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; background: rgba(102, 126, 234, 0.3); transform: translate(-50%, -50%); transition: width 0.6s, height 0.6s; } .share-button:hover::before { width: 300px; height: 300px; } .share-button:hover { transform: translateY(-2px); border-color: #667eea; color: #fff; box-shadow: 0 8px 16px rgba(102, 126, 234, 0.2); } .share-button svg { position: relative; z-index: 1; } .share-button span { position: relative; z-index: 1; } /* Platform-specific colors on hover */ .share-twitter:hover { border-color: #1DA1F2; color: #1DA1F2; } .share-linkedin:hover { border-color: #0077B5; color: #0077B5; } .share-reddit:hover { border-color: #FF4500; color: #FF4500; } .share-hackernews:hover { border-color: #FF6600; color: #FF6600; } .share-email:hover { border-color: #764ba2; color: #764ba2; } .share-copy:hover, .share-copy.copied { border-color: #10b981; color: #10b981; } .share-copy.copied { animation: successPulse 0.5s ease; } @keyframes successPulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } } /* Native share button (mobile) */ .share-native { display: none; width: 100%; background: linear-gradient(135deg, #667eea, #764ba2); border: none; color: white; font-weight: 600; margin-top: 12px; } .share-native:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3); } /* Toast notification */ .share-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); z-index: 10000; opacity: 0; transition: all 0.3s ease; font-family: 'JetBrains Mono', monospace; } .share-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); } /* Mobile responsive */ @media (max-width: 768px) { .share-buttons-grid { grid-template-columns: repeat(3, 1fr); } .share-native { display: flex; } .share-button span { display: none; } .share-button { padding: 12px; } } /* Dark theme adjustments */ [data-theme="dracula"] .share-button, [data-theme="nord"] .share-button, [data-theme="monokai"] .share-button { background: var(--bg-secondary); border-color: var(--accent); } /* Print styles */ @media print { .share-buttons { display: none; } }</style><div class="related-posts-section"><h2 class="related-posts-header"> <span class="gradient-text">Related Articles</span></h2><p class="no-related-posts">No related articles found. Check back later for more content!</p></div></div></article></main><footer class="site-footer"><div class="footer-content"><p>A comprehensive archive of articles on Java, Software Development, and Technology</p><p>¬© 2025 A N M Bazlur Rahman. All articles are archived from <a href="https://bazlur.ca">bazlur.ca</a></p><p> <a href="/feed.xml">RSS Feed</a> ‚Ä¢ <a href="https://twitter.com/bazlur_rahman">Twitter</a> ‚Ä¢ <a href="https://github.com/rokon12">GitHub</a></p></div></footer><script> // Fade-in animations on scroll document.addEventListener('DOMContentLoaded', function() { const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -100px 0px' }; const observer = new IntersectionObserver(function(entries) { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } }); }, observerOptions); // Observe fade-in elements document.querySelectorAll('.fade-in, .fade-in-up, .fade-in-left, .fade-in-right, .stagger-animation').forEach(el => { observer.observe(el); }); // Add fade-in classes to post cards document.querySelectorAll('.post-card').forEach((card, index) => { card.classList.add('fade-in-up'); card.style.transitionDelay = `${index * 0.1}s`; }); // Removed duplicate image observer - handled by image-optimization.js }); </script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" data-manual></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script> <script defer src="/assets/js/prism-setup.js"></script> <script defer src="/assets/js/terminal.js"></script> <script defer src="/assets/js/image-optimization.js"></script> <script> if ('loading' in HTMLImageElement.prototype) { const images = document.querySelectorAll('img[loading="lazy"]'); images.forEach(img => { img.src = img.dataset.src || img.src; }); } else { // Fallback for browsers that don't support lazy loading const script = document.createElement('script'); script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js'; document.body.appendChild(script); } </script><div class="reading-progress" id="reading-progress"></div><script> document.addEventListener('scroll', function() { const winScroll = document.body.scrollTop || document.documentElement.scrollTop; const height = document.documentElement.scrollHeight - document.documentElement.clientHeight; const scrolled = (winScroll / height) * 100; document.getElementById("reading-progress").style.width = scrolled + "%"; }); </script> <script> document.addEventListener('DOMContentLoaded', function() { // Mobile menu toggle const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const siteNav = document.querySelector('.site-nav'); if (mobileMenuToggle) { mobileMenuToggle.addEventListener('click', function() { const isExpanded = this.getAttribute('aria-expanded') === 'true'; this.setAttribute('aria-expanded', !isExpanded); siteNav.classList.toggle('is-active'); document.body.classList.toggle('menu-open'); }); // Close menu when clicking outside document.addEventListener('click', function(e) { if (!e.target.closest('.site-header') && siteNav.classList.contains('is-active')) { mobileMenuToggle.setAttribute('aria-expanded', 'false'); siteNav.classList.remove('is-active'); document.body.classList.remove('menu-open'); } }); } // Initialize theme const savedTheme = localStorage.getItem('theme') || 'dark'; document.documentElement.setAttribute('data-theme', savedTheme); // Global search shortcut document.addEventListener('keydown', function(e) { // Focus search with / if (e.key === '/' && !e.metaKey && !e.ctrlKey) { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement !== searchInput) { e.preventDefault(); searchInput.focus(); document.body.classList.add('search-focused'); } } // Clear focus on ESC if (e.key === 'Escape') { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement === searchInput) { searchInput.blur(); searchInput.value = ''; document.body.classList.remove('search-focused'); } } }); }); </script> <button class="back-to-top" id="back-to-top" aria-label="Back to top"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline> </svg> </button> <script> document.addEventListener('DOMContentLoaded', function() { const backToTopButton = document.getElementById('back-to-top'); // Show/hide button based on scroll position function toggleBackToTop() { if (window.scrollY > 300) { backToTopButton.classList.add('visible'); } else { backToTopButton.classList.remove('visible'); } } // Throttle scroll events let isScrolling = false; window.addEventListener('scroll', function() { if (!isScrolling) { window.requestAnimationFrame(function() { toggleBackToTop(); isScrolling = false; }); isScrolling = true; } }); // Smooth scroll to top backToTopButton.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); }); // Initial check toggleBackToTop(); }); </script> <script> if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { console.log('ServiceWorker registration successful'); }, function(err) { console.log('ServiceWorker registration failed: ', err); }); }); } </script>