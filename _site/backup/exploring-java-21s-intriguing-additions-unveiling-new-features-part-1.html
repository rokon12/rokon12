<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="https://bazlur.ca/2023/06/20/exploring-java-21s-intriguing-additions-unveiling-new-features-part-1/"><title>Exploring Java 21’s Intriguing Additions: Unveiling New Features (Part 1) | Bazlur’s Blog Archive</title><meta name="generator" content="Jekyll v3.9.5" /><meta property="og:title" content="Exploring Java 21’s Intriguing Additions: Unveiling New Features (Part 1)" /><meta name="author" content="A N M Bazlur Rahman" /><meta property="og:locale" content="en_US" /><meta name="description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><meta property="og:description" content="A comprehensive archive of articles on Java, Software Development, and Technology" /><link rel="canonical" href="http://localhost:4001/backup/exploring-java-21s-intriguing-additions-unveiling-new-features-part-1.html" /><meta property="og:url" content="http://localhost:4001/backup/exploring-java-21s-intriguing-additions-unveiling-new-features-part-1.html" /><meta property="og:site_name" content="Bazlur’s Blog Archive" /><meta property="og:image" content="http://localhost:4001/assets/img/default-og.jpg" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="http://localhost:4001/assets/img/default-og.jpg" /><meta property="twitter:title" content="Exploring Java 21’s Intriguing Additions: Unveiling New Features (Part 1)" /><meta name="twitter:site" content="@bazlur_rahman" /><meta name="twitter:creator" content="@A N M Bazlur Rahman" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"A N M Bazlur Rahman","url":"https://bazlur.ca"},"description":"A comprehensive archive of articles on Java, Software Development, and Technology","headline":"Exploring Java 21’s Intriguing Additions: Unveiling New Features (Part 1)","image":"http://localhost:4001/assets/img/default-og.jpg","url":"http://localhost:4001/backup/exploring-java-21s-intriguing-additions-unveiling-new-features-part-1.html"}</script><style> /* Critical CSS - Inline for faster initial render */ :root { --primary-color: #2563eb; --secondary-color: #7c3aed; --text-color: #1f2937; --text-light: #6b7280; --bg-color: #ffffff; --bg-gray: #f9fafb; } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; line-height: 1.6; color: var(--text-color); background: var(--bg-gray); } .wrapper { max-width: 1200px; margin: 0 auto; padding: 0 2rem; } header { background: var(--bg-color); box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; } .site-nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; } .site-title { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; } .nav-links { display: flex; gap: 2rem; list-style: none; } .nav-links a { color: var(--text-color); text-decoration: none; transition: color 0.2s; } .nav-links a:hover { color: var(--primary-color); } /* Above-the-fold home page styles */ .banner-container { margin: 2rem auto 3rem; text-align: center; } .ascii-banner { display: inline-block; font-family: 'JetBrains Mono', monospace; font-size: 11px; line-height: 1.2; color: var(--primary-color); } @media (max-width: 768px) { .wrapper { padding: 0 1rem; } .ascii-banner { font-size: 6px; } .nav-links { gap: 1rem; } }</style><link rel="preload" href="/assets/css/main.css?v=2" as="style" onload="this.onload=null;this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="/assets/css/main.css?v=2"></noscript><link rel="alternate" type="application/rss+xml" title="Bazlur&#39;s Blog Archive" href="/feed.xml"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet"><body><header class="site-header"><div class="header-wrapper"> <a class="site-title" href="/">Bazlur&#39;s Blog Archive</a> <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false"> <span class="hamburger"> <span></span> <span></span> <span></span> </span> </button><nav class="site-nav"> <a class="nav-link" href="/">Home</a> <a class="nav-link" href="/archive">Archive</a> <a class="nav-link" href="/tags">Tags</a> <a class="nav-link" href="/search">Search</a> <a class="nav-link" href="https://bazlur.com/conference/" target="_blank" rel="noopener">Speaking</a> <a class="nav-link" href="/about">About</a> <a class="nav-link nav-link-external" href="https://bazlur.ca" target="_blank" rel="noopener">Original Site →</a></nav></div></header><main class="page-content" aria-label="Content"><p><img src="/backup/images/erik.jpeg" alt="" /></p><h1 id="exploring-java-21s-intriguing-additions-unveiling-new-features-part-1">Exploring Java 21’s Intriguing Additions: Unveiling New Features (Part 1)</h1><h2 id="introduction">Introduction:</h2><p>Java 21 is going to introduce several intriguing additions that enhance the language’s capabilities.</p><p>This article aims to discuss a few notable features that stand out, providing an overview of their functionalities and potential use cases.</p><p><br /></p><h2 id="character-enhancements">Character Enhancements:</h2><ol><li><code>Character.isEmoji(int codePoint)</code>: This method determines whether a character is considered an emoji based on its Unicode properties defined in Unicode Emoji (<a href="https://unicode.org/reports/tr51/#Emoji_Properties_and_Data_Files">Unicode Emoji Technical Standard #51</a>). For example, executing <code>Character.isEmoji(9203)</code> would return <code>true</code> for the character ⏳, which has the code point 9203.<li><code>Character.isEmojiPresentation(int codePoint)</code>: Similar to <code>isEmoji()</code>, this method checks if a character has the Emoji Presentation property. It helps identify characters that display as emojis when rendered.</ol><p>Example:</p><pre><code>boolean isEmoji = Character.isEmoji(9203);
System.out.println(isEmoji);
</code></pre><p>The output will be <code>true</code> because the character with code point 9203 (⏳) is considered an emoji.</p><p>You can find more details about these methods in the <a href="https://download.java.net/java/early_access/jdk21/docs/api/java.base/java/lang/Character.html#isEmoji(int)">Java documentation</a>.</p><p><br /></p><h2 id="stringbuffer-and-stringbuilder-improvements">StringBuffer and StringBuilder Improvements:</h2><p>Java 21 enhances the <code>StringBuffer</code> and <code>StringBuilder</code> classes with the <code>repeat()</code> method, which allows repetitive concatenation of characters or character sequences. The two overloaded versions of <code>repeat()</code> are as follows:</p><ol><li><code>StringBuffer.repeat(int codePoint, int count)</code>: Repeats <code>count</code> copies of the string representation of the specified <code>codePoint</code> argument in the <code>StringBuffer</code> sequence. For instance, executing <code>buffer.repeat(9203, 5)</code> would append ⏳ five times to the <code>StringBuffer</code>, resulting in “⏳⏳⏳⏳⏳”.<li><code>StringBuffer.repeat(CharSequence cs, int count)</code>: Appends <code>count</code> copies of the specified <code>CharSequence</code> <code>cs</code> to the <code>StringBuffer</code>. Similarly, these methods are also available in the <code>StringBuilder</code> class.</ol><p>Example:</p><pre><code>var buffer = new StringBuffer();
buffer.repeat(9203, 5);
System.out.println(buffer);
</code></pre><p><br /></p><p>The output will be <code>⏳⏳⏳⏳⏳</code>, as the code point 9203 (⏳) is repeated five times using the <code>repeat()</code> method.</p><p><br /></p><h2 id="string-enhancements">String Enhancements:</h2><p>Java 21 introduces two new methods in the <code>String</code> class, namely <code>indexOf(String str, int beginIndex, int endIndex)</code> and <code>indexOf(int ch, int beginIndex, int endIndex)</code>, which expand the searching capabilities within a specified range of a string.</p><ol><li><code>String.indexOf(String str, int beginIndex, int endIndex)</code>: Returns the index of the first occurrence of the specified substring within the given index range of the string. This method provides the same result as invoking <code>s.substring(beginIndex, endIndex).indexOf(str) + beginIndex</code>. If the <code>indexOf(String)</code> method returns a non-negative index, it is returned; otherwise, -1 is returned.<li><code>String.indexOf(int ch, int beginIndex, int endIndex)</code>: Returns the index of the first occurrence of the specified character within the given range of the string. The search starts at <code>beginIndex</code> and stops before <code>endIndex</code>. This method supports characters in the range from 0 to 0xFFFF, as well as other Unicode code points.</ol><p><br /></p><p>Java 21 also enhances the <code>String</code> class with a <code>splitWithDelimiters(String regex, int limit)</code> method. This method splits a string based on a given regular expression and returns both the strings and the matching delimiters. For example:</p><pre><code>var booAndFoo = "boo:::and::foo";
String[] splits = booAndFoo.splitWithDelimiters(":+", 3);
System.out.println("splits = " + Arrays.toString(splits));
</code></pre><p>The output will be: <code>splits = [boo, :::, and, ::, foo]</code>, where the string is split around the <code>:+</code> delimiter, limiting the result to a maximum of three splits.</p><p><br /></p><h2 id="collections-framework-enhancements">Collections Framework Enhancements:</h2><p>Java 21 introduces several new methods in the <code>Collections</code> class that enhance the Collections Framework’s functionality.</p><ol><li><code>Collections.newSequencedSetFromMap(SequencedMap&lt;E, Boolean&gt; map)</code>: This method returns a <code>SequencedSet</code> backed by the specified <code>SequencedMap</code>. The resulting set maintains the ordering, concurrency, and performance characteristics of the backing map. This enables developers to obtain a <code>SequencedSet</code> implementation corresponding to any <code>SequencedMap</code> implementation.<li><code>Collections.shuffle(List&lt;?&gt; list, RandomGenerator rnd)</code>: This method randomly permutes the elements of the specified list using the provided source of randomness. The permutations occur with equal likelihood, assuming a fair source of randomness.<li><code>Collections.unmodifiableSequencedCollection(SequencedCollection&lt;? extends T&gt; c)</code>: Returns an unmodifiable view of the specified <code>SequencedCollection</code>. It allows read-only access to the underlying collection, throwing an <code>UnsupportedOperationException</code> if modification is attempted.<li><code>Collections.unmodifiableSequencedSet(SequencedSet&lt;? extends T&gt; s)</code>: Returns an unmodifiable view of the specified <code>SequencedSet</code>, providing read-only access to the set while disallowing modifications.<li><code>Collections.unmodifiableSequencedMap(SequencedMap&lt;? extends K, ? extends V&gt; m)</code>: Similar to the previous methods, this returns an unmodifiable view of the specified <code>SequencedMap</code>, allowing read-only operations.</ol><p>SequencedCollection and SequencedMap are new interfaces introduced in Java 21 that preserve the order of elements and entries, respectively.</p><p>To know more about Sequence Collection, read my news item on infoQ: <a href="https://www.infoq.com/news/2023/03/collections-framework-makeover/">Collections Framework Makeover</a>.</p><p><br /></p><h2 id="hashmap-and-hashset-improvements">HashMap and HashSet Improvements:</h2><p>Java 21 introduces convenient factory methods for creating <code>HashMap</code> and <code>HashSet</code> instances.</p><ol><li><code>Collections.newHashMap(int numMappings)</code>: Creates a new, empty <code>HashMap</code> suitable for the expected number of mappings. The map uses a default load factor of 0.75, and its initial capacity is typically large enough to accommodate the expected number of mappings without requiring resizing.<li><code>Collections.newHashSet(int numElements)</code>: Creates a new, empty <code>HashSet</code> suitable for the expected number of elements. The set also uses a default load factor of 0.75, with an initial capacity that can accommodate the expected number of elements efficiently.</ol><p><br /></p><h2 id="conclusion">Conclusion</h2><p><br /></p><p>If you want to experiment with these new features can download the OpenJDK from the <a href="https://jdk.java.net/21/">OpenJDK JDK 21 Early-Access Builds</a>.</p><p>Another alternative is to use <a href="https://sdkman.io/">SDKMan</a>, a software development kit manager, to download and manage different versions of Java. SDKMan can be used via the command line, which can make the process easier for developers who prefer this method.</p><p>However, these are early-access builds, so they may not be as stable as the final release, scheduled for September 2023, and are intended for testing and feedback purposes.</p><p>Nonetheless, Java 21 introduces various exciting language and collections framework additions. The new methods related to character properties, string manipulation, and collections provide developers with enhanced functionality and flexibility in their code. These additions aim to improve the productivity and performance of Java developers.</p><p><strong><em>Note: To explore the complete set of new functionalities introduced in Java 21, stay tuned for future articles discussing additional features.</em></strong></p><hr /><h3 id="discover-more-from-a-n-m-bazlur-rahman">Discover more from A N M Bazlur Rahman</h3><p>Subscribe to get the latest posts sent to your email.<br /> Type your email… {#subscribe-email}</p><p>Subscribe {#subscribe-submit}</p></main><footer class="site-footer"><div class="footer-content"><p>A comprehensive archive of articles on Java, Software Development, and Technology</p><p>© 2025 A N M Bazlur Rahman. All articles are archived from <a href="https://bazlur.ca">bazlur.ca</a></p><p> <a href="/feed.xml">RSS Feed</a> • <a href="https://twitter.com/bazlur_rahman">Twitter</a> • <a href="https://github.com/rokon12">GitHub</a></p></div></footer><script> // Fade-in animations on scroll document.addEventListener('DOMContentLoaded', function() { const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -100px 0px' }; const observer = new IntersectionObserver(function(entries) { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } }); }, observerOptions); // Observe fade-in elements document.querySelectorAll('.fade-in, .fade-in-up, .fade-in-left, .fade-in-right, .stagger-animation').forEach(el => { observer.observe(el); }); // Add fade-in classes to post cards document.querySelectorAll('.post-card').forEach((card, index) => { card.classList.add('fade-in-up'); card.style.transitionDelay = `${index * 0.1}s`; }); // Removed duplicate image observer - handled by image-optimization.js }); </script> <script defer src="/assets/js/terminal.js"></script> <script defer src="/assets/js/image-optimization.js"></script> <script> if ('loading' in HTMLImageElement.prototype) { const images = document.querySelectorAll('img[loading="lazy"]'); images.forEach(img => { img.src = img.dataset.src || img.src; }); } else { // Fallback for browsers that don't support lazy loading const script = document.createElement('script'); script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js'; document.body.appendChild(script); } </script> <script> document.addEventListener('DOMContentLoaded', function() { // Mobile menu toggle const mobileMenuToggle = document.querySelector('.mobile-menu-toggle'); const siteNav = document.querySelector('.site-nav'); if (mobileMenuToggle) { mobileMenuToggle.addEventListener('click', function() { const isExpanded = this.getAttribute('aria-expanded') === 'true'; this.setAttribute('aria-expanded', !isExpanded); siteNav.classList.toggle('is-active'); document.body.classList.toggle('menu-open'); }); // Close menu when clicking outside document.addEventListener('click', function(e) { if (!e.target.closest('.site-header') && siteNav.classList.contains('is-active')) { mobileMenuToggle.setAttribute('aria-expanded', 'false'); siteNav.classList.remove('is-active'); document.body.classList.remove('menu-open'); } }); } // Initialize theme const savedTheme = localStorage.getItem('theme') || 'dark'; document.documentElement.setAttribute('data-theme', savedTheme); // Global search shortcut document.addEventListener('keydown', function(e) { // Focus search with / if (e.key === '/' && !e.metaKey && !e.ctrlKey) { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement !== searchInput) { e.preventDefault(); searchInput.focus(); document.body.classList.add('search-focused'); } } // Clear focus on ESC if (e.key === 'Escape') { const searchInput = document.querySelector('.quick-search-input') || document.querySelector('#search-input'); if (searchInput && document.activeElement === searchInput) { searchInput.blur(); searchInput.value = ''; document.body.classList.remove('search-focused'); } } }); }); </script> <button class="back-to-top" id="back-to-top" aria-label="Back to top"> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline> </svg> </button> <script> document.addEventListener('DOMContentLoaded', function() { const backToTopButton = document.getElementById('back-to-top'); // Show/hide button based on scroll position function toggleBackToTop() { if (window.scrollY > 300) { backToTopButton.classList.add('visible'); } else { backToTopButton.classList.remove('visible'); } } // Throttle scroll events let isScrolling = false; window.addEventListener('scroll', function() { if (!isScrolling) { window.requestAnimationFrame(function() { toggleBackToTop(); isScrolling = false; }); isScrolling = true; } }); // Smooth scroll to top backToTopButton.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); }); // Initial check toggleBackToTop(); }); </script> <script> if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').then(function(registration) { console.log('ServiceWorker registration successful'); }, function(err) { console.log('ServiceWorker registration failed: ', err); }); }); } </script>